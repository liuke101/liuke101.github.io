<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Unity编辑器扩展 | 游戏江湖</title><meta name="author" content="灵玉"><meta name="copyright" content="灵玉"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="1  GUI&#x2F;GUILayout[[《GUI》#GUI]] 关键字：GameView GUI， MonoBehaviour.OnGUI() UnityEngine. GUI ：可以用于运行时（在 Game 视图中显示）&#x2F; 编辑器（诸如在 Inspector）面板下显示相关 UI 组件与内容，需要自行计算 Rect [[1 前言]] ( https:&#x2F;&#x2F;zhuanlan.zhih">
<meta property="og:type" content="article">
<meta property="og:title" content="Unity编辑器扩展">
<meta property="og:url" content="http://liuke101.github.io/post/1888.html">
<meta property="og:site_name" content="游戏江湖">
<meta property="og:description" content="1  GUI&#x2F;GUILayout[[《GUI》#GUI]] 关键字：GameView GUI， MonoBehaviour.OnGUI() UnityEngine. GUI ：可以用于运行时（在 Game 视图中显示）&#x2F; 编辑器（诸如在 Inspector）面板下显示相关 UI 组件与内容，需要自行计算 Rect [[1 前言]] ( https:&#x2F;&#x2F;zhuanlan.zhih">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190021833.png">
<meta property="article:published_time" content="2023-09-07T16:00:00.000Z">
<meta property="article:modified_time" content="2024-08-06T15:37:59.002Z">
<meta property="article:author" content="灵玉">
<meta property="article:tag" content="Unity">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190021833.png"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202404232138939.png"><link rel="canonical" href="http://liuke101.github.io/post/1888.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="6wt4eQbcmYIioyaSsUswEjImObRq1GoUZP_ZRoEoOXc"/><meta name="msvalidate.01" content="9315C074B7CC1C8996DDD5A9533EF368"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?1d08ce745bb272195666f030857b5f8b";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"QTHLKKVLAS","apiKey":"7f01e97a350ca196bda1df9cd9168b30","indexName":"hexo","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 灵玉","link":"链接: ","source":"来源: 游戏江湖","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#804bfb","bgDark":"#804bfb","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Unity编辑器扩展',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-08-06 23:37:59'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/I168.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">77</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">21</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190021833.png')"><nav id="nav"><span id="blog-info"><a href="/" title="游戏江湖"><span class="site-name">游戏江湖</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Unity编辑器扩展</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-09-07T16:00:00.000Z" title="发表于 2023-09-08 00:00:00">2023-09-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-08-06T15:37:59.002Z" title="更新于 2024-08-06 23:37:59">2024-08-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Unity/">Unity</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">12k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>48分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Unity编辑器扩展"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/post/1888.html#post-comment"><span class="waline-comment-count" data-path="/post/1888.html"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-GUI-GUILayout"><a href="#1-GUI-GUILayout" class="headerlink" title="1  GUI&#x2F;GUILayout"></a>1  GUI&#x2F;GUILayout</h1><p>[[《GUI》#GUI]]</p>
<p><strong>关键字</strong>：GameView GUI， <a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.OnGUI.html">MonoBehaviour.OnGUI()</a></p>
<p><strong>UnityEngine. GUI</strong> ：可以用于运行时（在 Game 视图中显示）&#x2F; 编辑器（诸如在 Inspector）面板下显示相关 UI 组件与内容，需要自行计算 Rect [[1 前言]] ( <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/503154643#ref_1">https://zhuanlan.zhihu.com/p/503154643#ref_1</a> )</p>
<p><strong>Rect</strong><br>这个类型在编辑器拓展中十分常见，官方解释为<br>A 2D Rectangle defined by X and Y position, width and height.<br>一个由 X，Y 坐标，width，height 宽高定义的 2D 矩形<br>其以左上角为坐标原点，X 往右递增，Y 往下递增<br>更加详细介绍可参照：<a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/Rect.html">Unity Rect 官方文档</a></p>
<p><strong>UnityEngine. GUILayout</strong> ：是基于 GUI 的实现，自动进行排版，计算坐标与宽高。</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016889.jpg" alt="ff5059c9e25b452a200fdfddf691dcb1_MD5"></p>
<h1 id="2-EditorGUI-EditorGUILayout"><a href="#2-EditorGUI-EditorGUILayout" class="headerlink" title="2 EditorGUI&#x2F;EditorGUILayout"></a>2 EditorGUI&#x2F;EditorGUILayout</h1><p><strong>关键字</strong>：编辑器扩展，<a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/Editor.html">Editor</a>，<a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/EditorWindow.html">EditorWindow</a></p>
<p><strong>UnityEditor. EditorGUI</strong>：只可用于编辑器，需要自行计算 Rect。</p>
<p><strong>UnityEditor. EditorGUILayout</strong>：只可用于编辑器，自动计算 Rect</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016890.png" alt="386f878452650d21879ce4e22c4c37a6_MD5"></p>
<h2 id="汇总"><a href="#汇总" class="headerlink" title="汇总"></a>汇总</h2><p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016891.png" alt="06a49d958bf7cb0e0728a892d41faf46_MD5"></p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016892.png" alt="0a481a9bf1f3e1e14d93e154d99d1b44_MD5"></p>
<p>关于效果图最后它的代码我隐藏掉了如何想看看可以自行打开</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016893.png" alt="f9fbd6a00ccffa20ca887a2e98bc4db8_MD5"></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Mybianyi</span> : <span class="title">EditorWindow</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">string</span> PasswordField = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="built_in">string</span> m_textArea = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="built_in">float</span> sliders = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">int</span> slidera = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">string</span> BeginToggleGroup = <span class="string">&quot;BeginToggleGroup&quot;</span>;</span><br><span class="line">    <span class="built_in">bool</span> ToggleGroup = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">string</span> Textfield = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="built_in">bool</span> fg = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">float</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">string</span> tag = <span class="string">&quot;aaa&quot;</span>;</span><br><span class="line">    <span class="built_in">int</span> Layerfield=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">string</span>[] pathname = <span class="keyword">new</span> <span class="built_in">string</span>[] &#123; <span class="string">&quot;All&quot;</span>, <span class="string">&quot;Asset&quot;</span>, <span class="string">&quot;...&quot;</span> &#125;; </span><br><span class="line">    <span class="built_in">float</span> minVal = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">float</span> maxVal = <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">float</span> minLimit = <span class="number">-5</span>;</span><br><span class="line">    <span class="built_in">float</span> maxLimit = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">static</span> Vector3 center = <span class="keyword">new</span> Vector3(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">    <span class="keyword">static</span> Vector3 size1 = <span class="keyword">new</span> Vector3(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">    Bounds _bounds = <span class="keyword">new</span> Bounds(center, size1);</span><br><span class="line">    Color m_color = Color.white;</span><br><span class="line">    AnimationCurve m_curve = AnimationCurve.Linear(<span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">    Vector2 size = <span class="keyword">new</span> Vector2(<span class="number">100</span>,<span class="number">100</span>);</span><br><span class="line">    <span class="built_in">int</span> flags = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">string</span>[] options = <span class="keyword">new</span> <span class="built_in">string</span>[] &#123; <span class="string">&quot;CanJump&quot;</span>, <span class="string">&quot;CanShoot&quot;</span>, <span class="string">&quot;CanSwim&quot;</span> ,<span class="string">&quot;Canabc&quot;</span>,<span class="string">&quot;Canacc&quot;</span>&#125;;</span><br><span class="line">    GameObject game ;</span><br><span class="line">    <span class="built_in">bool</span> showFoldout;</span><br><span class="line">    Vector2 m_vector2 = <span class="keyword">new</span> Vector2();</span><br><span class="line">    Vector3 m_vector3 = <span class="keyword">new</span> Vector3();</span><br><span class="line">    Vector4 m_vector4 = <span class="keyword">new</span> Vector4();</span><br><span class="line">    Transform selectedTransform;</span><br><span class="line">    GameObject selectedGameObject;</span><br><span class="line">    <span class="built_in">bool</span> fold;</span><br><span class="line">    <span class="built_in">bool</span> fold2;</span><br><span class="line">    [<span class="meta">MenuItem(<span class="string">&quot;MyWindow/Window&quot;</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">window</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Mybianyi mybianyi = GetWindow&lt;Mybianyi&gt;();</span><br><span class="line">        mybianyi.Show();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">     </span><br><span class="line">        <span class="comment">// GUILayout.Width  控制在窗口中物体所在的宽</span></span><br><span class="line">        <span class="comment">// GUILayout.Height  控制在窗口中物体所在的高</span></span><br><span class="line">        <span class="comment">//它们的返回的类型为GUILayoutOption</span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> GUILayout.Label 提示语句</span></span><br><span class="line"> </span><br><span class="line">        GUILayout.Label(<span class="string">&quot;我的编译器（My compiler）&quot;</span>, GUILayout.Width(<span class="number">50</span>), GUILayout.Height(<span class="number">10</span>)); <span class="comment">//提示语句</span></span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> GUILayout.Button( 按钮</span></span><br><span class="line">        GUILayout.Label(<span class="string">&quot;按钮&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>( GUILayout.Button(<span class="string">&quot;按钮&quot;</span>, GUILayout.Width(<span class="number">40</span>), GUILayout.Height(<span class="number">40</span>)))</span><br><span class="line">        &#123;</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> GUILayout.TextField 文本</span></span><br><span class="line">        GUILayout.Label(<span class="string">&quot;文本（可以输入）&quot;</span>);</span><br><span class="line">        Textfield = GUILayout.TextField(Textfield);<span class="comment">//单行</span></span><br><span class="line">        <span class="comment">//参数2 maxLength 最大有效长度</span></span><br><span class="line">        <span class="comment">// Textfield = GUILayout.TextField(Textfield,5);</span></span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> GUILayout.Space 空行</span></span><br><span class="line">        <span class="comment">//参数为float类型代表空行的距离</span></span><br><span class="line">        GUILayout.Space(<span class="number">10</span>);</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> EditorGUILayout.Toggle 开关（跟Toggle一样）</span></span><br><span class="line">        fg = EditorGUILayout.Toggle(<span class="string">&quot;Toggle&quot;</span>, fg);<span class="comment">//开关</span></span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> GUILayout.BeginHorizontal 横向</span></span><br><span class="line">        GUILayout.BeginHorizontal();<span class="comment">//可以在里面存放多个如果不规定大小系统会平均分配大小</span></span><br><span class="line">        GUILayout.Button(<span class="string">&quot;按钮&quot;</span>);</span><br><span class="line">        Textfield = GUILayout.TextField(Textfield);</span><br><span class="line">        GUILayout.EndHorizontal();<span class="comment">//结束语一定要有</span></span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> GUILayout.BeginVertical 纵向</span></span><br><span class="line">        GUILayout.BeginVertical();<span class="comment">//可以在里面存放多个如果不规定大小系统会平均分配大小</span></span><br><span class="line">        GUILayout.Button(<span class="string">&quot;按钮&quot;</span>);</span><br><span class="line">        Textfield = GUILayout.TextField(Textfield);</span><br><span class="line">        GUILayout.EndVertical();<span class="comment">//结束语一定要有</span></span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span>  GUILayout.HorizontalSlider（横） GUILayout.VerticalSlider（纵）  Slider(分横纵 上横下纵)</span></span><br><span class="line">        sum = GUILayout.HorizontalSlider(sum, <span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line">        <span class="comment">// sum = GUILayout.VerticalSlider(sum, 0, 10);</span></span><br><span class="line">        GUILayout.Space(<span class="number">20</span>);</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> EditorGUILayout.Popup  下拉</span></span><br><span class="line">        count = EditorGUILayout.Popup(<span class="string">&quot;下拉：&quot;</span>,count,pathname);</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> GUILayout.BeginScrollView  滑动列表 </span></span><br><span class="line">        <span class="comment">//两个true可以让横纵两条线显示出了</span></span><br><span class="line">        <span class="comment">//两个false可以让横纵两条线不显示出来</span></span><br><span class="line">        size = GUILayout.BeginScrollView(size,<span class="literal">true</span>,<span class="literal">true</span>);</span><br><span class="line">        </span><br><span class="line">        GUILayout.EndScrollView();</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> EditorGUILayout.BoundsField （边界输入）   EditorGUILayout.ColorField（颜色输入）  EditorGUILayout.CurveField（曲线输入）   输入框</span></span><br><span class="line">        <span class="comment">//BoundsField 边界输入框</span></span><br><span class="line">        _bounds = EditorGUILayout.BoundsField(<span class="string">&quot;BoundsField:&quot;</span>, _bounds);</span><br><span class="line">        <span class="comment">//ColorField 颜色输入框</span></span><br><span class="line">        m_color = EditorGUILayout.ColorField(<span class="string">&quot;ColorField:&quot;</span>, m_color);</span><br><span class="line">        <span class="comment">//CurveField 曲线输入框</span></span><br><span class="line">        m_curve = EditorGUILayout.CurveField(<span class="string">&quot;CurveField:&quot;</span>, m_curve);</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> EditorGUILayout.TagField    tag(标签)</span></span><br><span class="line">        tag = EditorGUILayout.TagField(<span class="string">&quot;TagField:&quot;</span>, tag);</span><br><span class="line"> </span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span>   EditorGUILayout.LayerField(可以获取所有的Layer)</span></span><br><span class="line">        <span class="comment">//Layerfield 可以获取所有的Layer</span></span><br><span class="line">        Layerfield = EditorGUILayout.LayerField(<span class="string">&quot;LayerField:&quot;</span>, Layerfield);</span><br><span class="line"> </span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span>   EditorGUILayout.MaskField (下拉可以多选)</span></span><br><span class="line">        flags = EditorGUILayout.MaskField(<span class="string">&quot;MaskField:&quot;</span>, flags, options);</span><br><span class="line">        <span class="comment">//Debug.Log(flags);// 除了数组的第一个是1 后面全是2的幂（幂为对应的下标）   如果多选它们会相加   系统默认会添加Nothing （对应的值0） 和Everything（-1）</span></span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> EditorGUILayout.ObjectField(选择物体)</span></span><br><span class="line">        game = (GameObject) EditorGUILayout.ObjectField(game,<span class="keyword">typeof</span>(GameObject),<span class="literal">true</span>);<span class="comment">//typeof(类型) 确定好类型系统会自动帮我找到所有的关于这个类型的物体</span></span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span>  EditorGUILayout.Foldout 折叠</span></span><br><span class="line">        showFoldout = EditorGUILayout.Foldout(showFoldout, <span class="string">&quot;折叠子物体：&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (showFoldout)</span><br><span class="line">        &#123;</span><br><span class="line">            EditorGUI.indentLevel++;<span class="comment">//缩进级别</span></span><br><span class="line">            EditorGUILayout.LabelField(<span class="string">&quot;折叠块内容1&quot;</span>);</span><br><span class="line">            EditorGUI.indentLevel++;</span><br><span class="line">            EditorGUILayout.LabelField(<span class="string">&quot;折叠块内容2&quot;</span>);</span><br><span class="line">            EditorGUI.indentLevel--;</span><br><span class="line">            EditorGUI.indentLevel--;</span><br><span class="line">            EditorGUILayout.LabelField(<span class="string">&quot;折叠块内容3&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> EditorGUILayout.BeginToggleGroup(开关)</span></span><br><span class="line">        ToggleGroup = EditorGUILayout.BeginToggleGroup(BeginToggleGroup, ToggleGroup);</span><br><span class="line">            Textfield = GUILayout.TextField(Textfield);</span><br><span class="line">        EditorGUILayout.EndToggleGroup();</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span>  GUILayout.FlexibleSpace（布局之间左右对齐）</span></span><br><span class="line">        EditorGUILayout.BeginHorizontal();<span class="comment">//开始最外层横向布局</span></span><br><span class="line">        GUILayout.FlexibleSpace();<span class="comment">//布局之间左右对齐</span></span><br><span class="line">        GUILayout.Label(<span class="string">&quot;-----------------分割线-----------------&quot;</span>);</span><br><span class="line">        GUILayout.FlexibleSpace();<span class="comment">//布局之间左右对齐</span></span><br><span class="line">        EditorGUILayout.EndHorizontal();</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span>  EditorGUILayout.HelpBox（提示语句）</span></span><br><span class="line">        EditorGUILayout.HelpBox(<span class="string">&quot;HelpBox Error:&quot;</span>, MessageType.Error);<span class="comment">//红色错误号</span></span><br><span class="line">        EditorGUILayout.HelpBox(<span class="string">&quot;HelpBox Info:&quot;</span>, MessageType.Info);<span class="comment">//白色提示号</span></span><br><span class="line">        EditorGUILayout.HelpBox(<span class="string">&quot;HelpBox None:&quot;</span>, MessageType.None);<span class="comment">//解释号</span></span><br><span class="line">        EditorGUILayout.HelpBox(<span class="string">&quot;HelpBox Warning:&quot;</span>, MessageType.Warning);<span class="comment">//黄色警告号</span></span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> EditorGUILayout.Slider(Slider)</span></span><br><span class="line">        sliders = EditorGUILayout.Slider(<span class="string">&quot;Slider:&quot;</span>,sliders,<span class="number">0</span>,<span class="number">10</span>);</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span>  EditorGUILayout.TextArea（text 自适应高）</span></span><br><span class="line">        m_textArea = EditorGUILayout.TextArea(m_textArea);<span class="comment">//可以多行</span></span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> GUILayout.PasswordField(可以改变成对应的符号)</span></span><br><span class="line">        EditorGUILayout.BeginHorizontal();</span><br><span class="line">        GUILayout.Label(<span class="string">&quot;密码text&quot;</span>, GUILayout.Width(<span class="number">60</span>));</span><br><span class="line">        PasswordField = GUILayout.PasswordField(PasswordField, <span class="string">&#x27;*&#x27;</span>);<span class="comment">//可以改变成对应的符号</span></span><br><span class="line">        EditorGUILayout.EndHorizontal();</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span>  EditorGUILayout.Vector2Field  EditorGUILayout.Vector3Field  EditorGUILayout.Vector4Field </span></span><br><span class="line">        m_vector2 = EditorGUILayout.Vector2Field(<span class="string">&quot;Vector2:&quot;</span>, m_vector2);</span><br><span class="line">        m_vector3 = EditorGUILayout.Vector3Field(<span class="string">&quot;Vector3:&quot;</span>, m_vector3);</span><br><span class="line">        m_vector4 = EditorGUILayout.Vector4Field(<span class="string">&quot;Vector4:&quot;</span>, m_vector4);</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> EditorGUILayout.SelectableLabel （可以复制粘贴）</span></span><br><span class="line">        EditorGUILayout.SelectableLabel(<span class="string">&quot;SelectableLabel&quot;</span>);</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span>  EditorGUILayout.MinMaxSlider （取值范围）</span></span><br><span class="line">        EditorGUILayout.LabelField(<span class="string">&quot;Min Val:&quot;</span>, minVal.ToString());</span><br><span class="line">        EditorGUILayout.LabelField(<span class="string">&quot;Max Val:&quot;</span>, maxVal.ToString());</span><br><span class="line">        EditorGUILayout.MinMaxSlider(<span class="string">&quot;MinMaxSlider&quot;</span>, <span class="keyword">ref</span> minVal, <span class="keyword">ref</span> maxVal, minLimit, maxLimit);</span><br><span class="line">                                                     <span class="comment">//现在最小  现在最大 最小长度 最大长度 </span></span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span>   EditorGUILayout.IntSlider（只能是整数）</span></span><br><span class="line">        slidera = EditorGUILayout.IntSlider(<span class="string">&quot;IntSlider:&quot;</span>, slidera, <span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span>  EditorGUILayout.InspectorTitlebar（将物体返回回来）</span></span><br><span class="line">        <span class="comment">//Transform selectedTransform = Selection.activeGameObject.transform;</span></span><br><span class="line">        <span class="comment">//GameObject selectedGameObject = Selection.activeGameObject;//选择物体（GameObject）</span></span><br><span class="line">        <span class="comment">//fold = EditorGUILayout.InspectorTitlebar(fold, selectedTransform);</span></span><br><span class="line">        <span class="comment">//fold2 = EditorGUILayout.InspectorTitlebar(fold2, selectedGameObject);</span></span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="一、Editor-的基本面板"><a href="#一、Editor-的基本面板" class="headerlink" title="一、Editor 的基本面板"></a>一、Editor 的基本面板</h2><h3 id="1-浮动窗口（EditorWindow）"><a href="#1-浮动窗口（EditorWindow）" class="headerlink" title="1. 浮动窗口（EditorWindow）"></a>1. 浮动窗口（EditorWindow）</h3><p>关键字：UnityEditor.EditorWindow，MenuItem</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016894.png" alt="33d08d603393c529ef62bc81ccfda064_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TutorialWindow</span> : <span class="title">EditorWindow</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> TutorialWindow window; <span class="comment">//窗口实例对象，必须是一个static</span></span><br><span class="line"></span><br><span class="line">    [<span class="meta">MenuItem(<span class="string">&quot;MyWindows/TutorialWindow&quot;</span>)</span>] <span class="comment">//定义菜单栏位置</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenWindow</span>() <span class="comment">//打开窗口函数，必须是static</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        window = GetWindow&lt;TutorialWindow&gt;(<span class="literal">false</span>, <span class="string">&quot;TutorialWindow&quot;</span>, <span class="literal">true</span>); <span class="comment">//实例化窗口</span></span><br><span class="line">        window.Show(); <span class="comment">//显示窗口</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 窗口内显示的GUI面板</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 Unity3d 上方菜单栏，我们可以看见：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016895.png" alt="959b8dd4bd1d105b5fbed49915bf5201_MD5"></p>
<p>点击就可以生成自定义窗口啦。</p>
<p><strong>之后所有 EditorWindow的 GUI 绘制，都是在 OnGUI() 函数中，为了预览方便，后续只会给出核心代码，实际上都是放在 OnGUI() 中。</strong></p>
<h3 id="2-检视面板（Inspector）"><a href="#2-检视面板（Inspector）" class="headerlink" title="2. 检视面板（Inspector）"></a>2. 检视面板（Inspector）</h3><p>关键字：UnityEditor.Editor， CustomEditor</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016896.png" alt="d82b8eb22bc534dd2efa66310c01fa0d_MD5"></p>
<p>Mono 代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TutorialMono</span> : <span class="title">MonoBehaviour</span> <span class="comment">//基本就是个空的Mono</span></span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Editor 代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line">[<span class="meta">CustomEditor(typeof(TutorialMono))</span>] <span class="comment">//指定自定义Editor所要绑定的Mono类型，这里就是typeof(TutorialMono)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TutorialMonoInspector</span> : <span class="title">Editor</span> <span class="comment">//继承Editor</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> TutorialMono m_target; <span class="comment">//在Inspector上显示的实例目标</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 当对象活跃时（在Inspector中显示时），unity自动调用此函数</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_target = target <span class="keyword">as</span> TutorialMono; <span class="comment">//绑定target，target官方解释： The object being inspected</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 重写OnInspectorGUI，之后所有的GUI绘制都在此方法中。</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnInspectorGUI</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">base</span>.OnInspectorGUI(); <span class="comment">//调用父类方法绘制一次GUI，TutorialMono中原本的可序列化数据等会在这里绘制一次。</span></span><br><span class="line">        <span class="comment">//如果不调用父类方法，则这个Mono的Inspector全权由下面代码绘制。</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;这是一个按钮&quot;</span>))   <span class="comment">//自定义按钮</span></span><br><span class="line">        &#123;</span><br><span class="line">            Debug.Log(<span class="string">&quot;Hello world&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>之后 Inspector 面板的所有的 GUI 绘制，都是在 OnInspectorGUI() 函数中，为了预览方便，后续只会给出核心代码，实际上都是放在 OnInspectorGUI() 中。</strong></p>
<h2 id="二、按钮控件"><a href="#二、按钮控件" class="headerlink" title="二、按钮控件"></a>二、按钮控件</h2><h3 id="1-普通按钮（Button）"><a href="#1-普通按钮（Button）" class="headerlink" title="1. 普通按钮（Button）"></a>1. 普通按钮（Button）</h3><p>关键字： GUILayout.Button</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016897.png" alt="8c03dd9088bd4b93a4f8d381067977bd_MD5"></p>
<p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if (GUILayout.Button(&quot;这是一个按钮&quot;))</span><br><span class="line">&#123;</span><br><span class="line">    Debug.Log(&quot;按了下按钮&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-按下触发按钮（DropdownButton）"><a href="#2-按下触发按钮（DropdownButton）" class="headerlink" title="2. 按下触发按钮（DropdownButton）"></a>2. 按下触发按钮（DropdownButton）</h3><p>关键字： EditorGUILayout.DropdownButton</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016898.png" alt="7dbd6502611710672ce2163b5c8fa375_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> GUIContent content = <span class="keyword">new</span> GUIContent(<span class="string">&quot;DropdownButton&quot;</span>); <span class="comment">//定义一下显示内容</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">if</span> (EditorGUILayout.DropdownButton(content, FocusType.Passive))</span><br><span class="line">&#123;</span><br><span class="line">    Debug.Log(<span class="string">&quot;按下就触发，而不是抬起&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>看了看官方描述也是云里雾里，反正和 Button 的区别就是：</p>
<p>Button 是鼠标抬起触发。</p>
<p>Dropdown 是鼠标按下就触发。</p>
<p>咱也不是很清楚，几乎没用过这个组件，粗略了解就好（逃）。</p>
<h2 id="三、显示域（Field）"><a href="#三、显示域（Field）" class="headerlink" title="三、显示域（Field）"></a>三、显示域（Field）</h2><h3 id="1-对象域（ObjectField）"><a href="#1-对象域（ObjectField）" class="headerlink" title="1. 对象域（ObjectField）"></a>1. 对象域（ObjectField）</h3><p>关键字：EditorGUILayout.ObjectField</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016899.png" alt="d96bef83d59f2b9f348ce51caae4af22_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> GameObject m_objectValue; <span class="comment">//定义Object</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">//第一个参数： 目标Object</span></span><br><span class="line"><span class="comment">//第二个参数： Object的类型</span></span><br><span class="line"><span class="comment">//第三个参数： 是否允许赋值场景对象（一般是赋值Project中的Asset资源对象）</span></span><br><span class="line"><span class="comment">//最后需要一个【as】进行类型转换</span></span><br><span class="line">m_objectValue = EditorGUILayout.ObjectField(m_objectValue, <span class="keyword">typeof</span>(GameObject), <span class="literal">true</span>) <span class="keyword">as</span> GameObject;</span><br></pre></td></tr></table></figure>

<p>这个组件几乎是必用控件，Editor 的根本目的就是在编辑模式下，对某些资源对象（Object）进行 “增删改查”。</p>
<p>同时，这个 “Object” 不只是 GameObject，只要是继承 UnityEngine.Object 的类型，都可以用这个方法来获取，比如：Texture，Material 等等。</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016900.png" alt="bbafc994c940ef611bc64478d5260908_MD5"></p>
<p>值得注意的是，所有的 “Field” 类，如果不把数据放在左边赋值，那么在输入框内的修改将不会保存。</p>
<p>（仔细想想这个代码逻辑是这样的），这个特性可以拿来显示某些 “只读” 数据。</p>
<h3 id="2-整数域（IntField）"><a href="#2-整数域（IntField）" class="headerlink" title="2. 整数域（IntField）"></a>2. 整数域（IntField）</h3><p>关键字：EditorGUILayout.IntField</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016901.png" alt="6c605ceb53eecbfde7b0f5fcf8f2cbd3_MD5"></p>
<p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">private int m_intValue; //定义修改内容；</span><br><span class="line">...</span><br><span class="line">m_intValue = EditorGUILayout.IntField(&quot;整型输入框&quot;, m_intValue); //Title + Value</span><br></pre></td></tr></table></figure>

<h3 id="3-浮点、字符串、向量等各种域"><a href="#3-浮点、字符串、向量等各种域" class="headerlink" title="3. 浮点、字符串、向量等各种域"></a>3. 浮点、字符串、向量等各种域</h3><p>关键字：FloatField， TextField，Vector3Field…</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016902.png" alt="2a6b5765f3c5442d58dc6d757193cb42_MD5"></p>
<p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">private string m_textValue;</span><br><span class="line">private float m_floatValue;</span><br><span class="line">private Vector2 m_vec2;</span><br><span class="line">private Vector3 m_vec3;</span><br><span class="line">private Vector4 m_vec4;</span><br><span class="line">private Bounds m_bounds;</span><br><span class="line">private BoundsInt m_boundsInt;</span><br><span class="line">...</span><br><span class="line">m_floatValue = EditorGUILayout.FloatField(&quot;Float 输入：&quot;, m_floatValue);</span><br><span class="line">m_textValue = EditorGUILayout.TextField(&quot;Text输入：&quot;, m_textValue);</span><br><span class="line">m_vec2 = EditorGUILayout.Vector2Field(&quot;Vec2输入： &quot;, m_vec2);</span><br><span class="line">m_vec3 = EditorGUILayout.Vector3Field(&quot;Vec3输入： &quot;, m_vec3);</span><br><span class="line">m_vec4 = EditorGUILayout.Vector4Field(&quot;Vec4输入： &quot;, m_vec4);</span><br><span class="line">m_bounds = EditorGUILayout.BoundsField(&quot;Bounds输入： &quot;, m_bounds);</span><br><span class="line">m_boundsInt = EditorGUILayout.BoundsIntField(&quot;Bounds输入： &quot;, m_boundsInt);</span><br></pre></td></tr></table></figure>

<h3 id="4-标签文本域（LabelField）"><a href="#4-标签文本域（LabelField）" class="headerlink" title="4. 标签文本域（LabelField）"></a>4. 标签文本域（LabelField）</h3><p>关键字：EditorGUILayout.LabelField</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016903.png" alt="56f3c6fe45f13c44376f6da9fa168934_MD5"></p>
<p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EditorGUILayout.LabelField(&quot;文本标题&quot;, &quot;文本内容&quot;);</span><br></pre></td></tr></table></figure>

<h3 id="5-标签-层级选择域（TagField-LayerField）"><a href="#5-标签-层级选择域（TagField-LayerField）" class="headerlink" title="5. 标签 &#x2F; 层级选择域（TagField&#x2F;LayerField）"></a>5. 标签 &#x2F; 层级选择域（<strong>TagField&#x2F;LayerField</strong>）</h3><p>关键字：EditorGUILayout.TagField， EditorGUILayout.LayerField</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016904.png" alt="df9c908478e81e8c9212d8c9570ca472_MD5"></p>
<p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">private int m_layer;</span><br><span class="line">private string m_tag;</span><br><span class="line">...</span><br><span class="line">m_layer = EditorGUILayout.LayerField(&quot;层级选择&quot;, m_layer);</span><br><span class="line">m_tag = EditorGUILayout.TagField(&quot;标签选择&quot;, m_tag);</span><br></pre></td></tr></table></figure>

<h3 id="6-颜色域（ColorField）"><a href="#6-颜色域（ColorField）" class="headerlink" title="6. 颜色域（ColorField）"></a>6. 颜色域（ColorField）</h3><p>关键字：EditorGUILayout.ColorField</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016905.png" alt="fd7d5ed4ada0b7b51acf42dafdc837fd_MD5"></p>
<p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">private Color m_color;</span><br><span class="line">private GUIContent colorTitle = new GUIContent(&quot;颜色选择&quot;);</span><br><span class="line">...</span><br><span class="line">//着重强调一下这个重载方法</span><br><span class="line">//第一个参数： GUIContent，通常拿来作为Title</span><br><span class="line">//第二个参数： Color，目标修改数据</span><br><span class="line">//第三个参数： bool ，是否显示拾色器</span><br><span class="line">//第四个参数： bool ，是否显示透明度通道</span><br><span class="line">//第五个参数： bool ，是否支持HDR。</span><br><span class="line">m_color = EditorGUILayout.ColorField(colorTitle, m_color, true, true, true);</span><br></pre></td></tr></table></figure>

<p>现在 URP 基本标配，该上 HDR 啦！</p>
<h3 id="7-动画曲线域（CurveField）"><a href="#7-动画曲线域（CurveField）" class="headerlink" title="7. 动画曲线域（CurveField）"></a>7. 动画曲线域（CurveField）</h3><p>关键字：EditorGUILayout.CurveField， AnimationCurve</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016906.png" alt="df2a381cc3524b07c952c3b9d877d1bc_MD5"></p>
<p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">private AnimationCurve m_curve = AnimationCurve.Linear(0, 0, 1, 1);</span><br><span class="line">...</span><br><span class="line">m_curve = EditorGUILayout.CurveField(&quot;动画曲线：&quot;, m_curve);</span><br></pre></td></tr></table></figure>

<h2 id="四、枚举选择"><a href="#四、枚举选择" class="headerlink" title="四、枚举选择"></a>四、枚举选择</h2><h3 id="1-单选枚举（EnumPopup）"><a href="#1-单选枚举（EnumPopup）" class="headerlink" title="1. 单选枚举（EnumPopup）"></a>1. 单选枚举（EnumPopup）</h3><p>关键字：EditorGUILayout.EnumPopup</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016907.png" alt="dba22300bc28d854871abc5ba466f1fe_MD5"></p>
<p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">private enum TutorialEnum</span><br><span class="line">&#123;</span><br><span class="line">    One,</span><br><span class="line">    Two,</span><br><span class="line">    Three</span><br><span class="line">&#125;</span><br><span class="line">private TutorialEnum m_enum;</span><br><span class="line">...</span><br><span class="line">m_enum = (TutorialEnum)EditorGUILayout.EnumPopup(&quot;枚举选择&quot;, m_enum);</span><br></pre></td></tr></table></figure>

<h3 id="2-多选枚举（EnumFlagsField）"><a href="#2-多选枚举（EnumFlagsField）" class="headerlink" title="2. 多选枚举（EnumFlagsField）"></a>2. 多选枚举（EnumFlagsField）</h3><p>关键字：EditorGUILayout.EnumFlagsField</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016908.png" alt="f607db8bb768dc9c8421da1bec005766_MD5"></p>
<p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">private enum TutorialEnum</span><br><span class="line">&#123;</span><br><span class="line">    None = 0,</span><br><span class="line">    OneAndTwo = One | Two,</span><br><span class="line">    One = 1 &lt;&lt; 0,</span><br><span class="line">    Two = 1 &lt;&lt; 1,</span><br><span class="line">    Three = 1 &lt;&lt; 2</span><br><span class="line">&#125;</span><br><span class="line">private TutorialEnum m_enum;</span><br><span class="line">...</span><br><span class="line">m_enum = (TutorialEnum)EditorGUILayout.EnumFlagsField(&quot;枚举多选&quot;, m_enum);</span><br></pre></td></tr></table></figure>

<h3 id="3-单选-多选整型（IntPopup-MaskField）"><a href="#3-单选-多选整型（IntPopup-MaskField）" class="headerlink" title="3. 单选 &#x2F; 多选整型（IntPopup&#x2F;MaskField）"></a>3. 单选 &#x2F; 多选整型（IntPopup&#x2F;MaskField）</h3><p>关键字： EditorGUILayout.IntPopup， EditorGUILayout.MaskField</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016909.png" alt="8d74732cc45fde05581fee53f001549a_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">int</span> m_singleInt;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">int</span> m_multiInt;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">string</span>[] intSelections = <span class="keyword">new</span> <span class="built_in">string</span>[] &#123; <span class="string">&quot;整数10&quot;</span>, <span class="string">&quot;整数20&quot;</span>, <span class="string">&quot;整数30&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">string</span>[] intMultiSelections = <span class="keyword">new</span> <span class="built_in">string</span>[] &#123; <span class="string">&quot;1号&quot;</span>, <span class="string">&quot;2号&quot;</span>, <span class="string">&quot;3号&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">int</span>[] intValues = <span class="keyword">new</span> <span class="built_in">int</span>[] &#123; <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span> &#125;;</span><br><span class="line">...</span><br><span class="line">m_singleInt = EditorGUILayout.IntPopup(<span class="string">&quot;整数单选框&quot;</span>, m_singleInt, intSelections, intValues);</span><br><span class="line">EditorGUILayout.LabelField(<span class="string">$&quot;m_singleInt is <span class="subst">&#123;m_singleInt&#125;</span>&quot;</span>);</span><br><span class="line">m_multiInt = EditorGUILayout.MaskField(<span class="string">&quot;整数多选框&quot;</span>, m_multiInt, intMultiSelections);</span><br><span class="line">EditorGUILayout.LabelField(<span class="string">$&quot;m_multiInt is <span class="subst">&#123;m_multiInt&#125;</span>&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>笔者对这种用得少，也不是很熟悉。</p>
<h2 id="五-折叠栏"><a href="#五-折叠栏" class="headerlink" title="五. 折叠栏"></a>五. 折叠栏</h2><h3 id="1-折叠（Foldout）"><a href="#1-折叠（Foldout）" class="headerlink" title="1. 折叠（Foldout）"></a>1. 折叠（<strong>Foldout</strong>）</h3><p>关键字： EditorGUILayout.Foldout</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016910.png" alt="ea0ddd7b78c2d1857d565efa0dcecdfe_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">bool</span> foldOut;</span><br><span class="line">...</span><br><span class="line">foldOut = EditorGUILayout.Foldout(foldOut, <span class="string">&quot;一般路过折叠栏&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (foldOut) <span class="comment">//只有foldout为true时，才会显示下方内容，相当于“折叠”了。</span></span><br><span class="line">&#123;</span><br><span class="line">        EditorGUILayout.LabelField(<span class="string">&quot;这是折叠标签内容&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-折叠组（FoldoutGroup）"><a href="#2-折叠组（FoldoutGroup）" class="headerlink" title="2. 折叠组（FoldoutGroup）"></a>2. 折叠组（<strong>FoldoutGroup</strong>）</h3><p>关键字：EditorGUILayout.BeginFoldoutHeaderGroup， EditorGUILayout.EndFoldoutHeaderGroup</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016911.png" alt="cb9ce4e7a4bc2821eb272dfb065353dc_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">bool</span> foldOut;</span><br><span class="line">...</span><br><span class="line">foldOut = EditorGUILayout.BeginFoldoutHeaderGroup(foldOut, <span class="string">&quot;折叠栏组&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (foldOut) <span class="comment">//只有foldout为true时，才会显示下方内容，相当于“折叠”了。</span></span><br><span class="line">&#123;</span><br><span class="line">        EditorGUILayout.LabelField(<span class="string">&quot;这是折叠标签内容&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">EditorGUILayout.EndFoldoutHeaderGroup(); <span class="comment">//只不过这种折叠需要成对使用，不然会有BUG</span></span><br></pre></td></tr></table></figure>

<h2 id="六-开关控件"><a href="#六-开关控件" class="headerlink" title="六. 开关控件"></a>六. 开关控件</h2><h3 id="1-单个开关（Toggle）"><a href="#1-单个开关（Toggle）" class="headerlink" title="1. 单个开关（Toggle）"></a>1. 单个开关（Toggle）</h3><p>关键字： EditorGUILayout.Toggle，EditorGUILayout.ToggleLeft</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016912.png" alt="506376c3bbb56966d28c885742f93a01_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">bool</span> toggle;</span><br><span class="line">...</span><br><span class="line">toggle = EditorGUILayout.Toggle(<span class="string">&quot;Normal Toggle&quot;</span>, toggle);</span><br><span class="line">toggle = EditorGUILayout.ToggleLeft(<span class="string">&quot;Left Toggle&quot;</span>, toggle);</span><br></pre></td></tr></table></figure>

<h3 id="2-开关组（ToggleGroup）"><a href="#2-开关组（ToggleGroup）" class="headerlink" title="2. 开关组（ToggleGroup）"></a>2. 开关组（ToggleGroup）</h3><p>关键字：EditorGUILayout.BeginToggleGroup，EditorGUILayout.EndToggleGroup</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016913.png" alt="4b6665fa4ccfa3782901fc6aa2417618_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">bool</span> toggle;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">string</span> m_inputText;</span><br><span class="line">...</span><br><span class="line">toggle = EditorGUILayout.BeginToggleGroup(<span class="string">&quot;开关组&quot;</span>, toggle);</span><br><span class="line">EditorGUILayout.LabelField(<span class="string">&quot;------Input Field------&quot;</span>);</span><br><span class="line">m_inputText = EditorGUILayout.TextField(<span class="string">&quot;输入内容：&quot;</span>, m_inputText);</span><br><span class="line">EditorGUILayout.EndToggleGroup();</span><br></pre></td></tr></table></figure>

<h2 id="七-滑动控件"><a href="#七-滑动控件" class="headerlink" title="七. 滑动控件"></a>七. 滑动控件</h2><h3 id="1-滑动条（Slider）"><a href="#1-滑动条（Slider）" class="headerlink" title="1. 滑动条（Slider）"></a>1. 滑动条（Slider）</h3><p>关键字：EditorGUILayout.Slider，EditorGUILayout.IntSlider</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016914.png" alt="48ab2acbcb12e705c877737e52354b3b_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">float</span> m_sliderValue;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">int</span> m_sliderIntValue;</span><br><span class="line">...        </span><br><span class="line"><span class="comment">//参数详解：</span></span><br><span class="line"><span class="comment">//第一个参数： string label 控件名称标签 </span></span><br><span class="line"><span class="comment">//第二个参数： float value 滑动当前值 </span></span><br><span class="line"><span class="comment">//第三个参数： float leftValue 滑动最小值 </span></span><br><span class="line"><span class="comment">//第四个参数： float rightValue 滑动最大值</span></span><br><span class="line">m_sliderValue = EditorGUILayout.Slider(<span class="string">&quot;滑动条Sample：&quot;</span>, m_sliderValue, <span class="number">0.123f</span>, <span class="number">7.77f</span>);</span><br><span class="line"><span class="comment">//参数同上</span></span><br><span class="line">m_sliderIntValue = EditorGUILayout.IntSlider(<span class="string">&quot;整数值滑动条&quot;</span>, m_sliderIntValue, <span class="number">2</span>, <span class="number">16</span>);</span><br></pre></td></tr></table></figure>

<h3 id="2-双滑块滑动条（MinMaxSlider）"><a href="#2-双滑块滑动条（MinMaxSlider）" class="headerlink" title="2. 双滑块滑动条（MinMaxSlider）"></a>2. 双滑块滑动条（<strong>MinMaxSlider</strong>）</h3><p>关键字：EditorGUILayout.MinMaxSlider</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016915.png" alt="8f227d23433b017697e77783c87b9fa1_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">float</span> m_leftValue;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">float</span> m_rightValue;</span><br><span class="line">...</span><br><span class="line">EditorGUILayout.MinMaxSlider(<span class="string">&quot;双块滑动条&quot;</span>, <span class="keyword">ref</span> m_leftValue, <span class="keyword">ref</span> m_rightValue, <span class="number">0.25f</span>, <span class="number">10.25f</span>);</span><br><span class="line">EditorGUILayout.FloatField(<span class="string">&quot;滑动左值：&quot;</span>, m_leftValue);</span><br><span class="line">EditorGUILayout.FloatField(<span class="string">&quot;滑动右值：&quot;</span>, m_rightValue);</span><br></pre></td></tr></table></figure>

<h2 id="八-其他控件"><a href="#八-其他控件" class="headerlink" title="八. 其他控件"></a>八. 其他控件</h2><h3 id="1-帮助框（HelpBox）"><a href="#1-帮助框（HelpBox）" class="headerlink" title="1. 帮助框（HelpBox）"></a>1. 帮助框（HelpBox）</h3><p>关键字： EditorGUILayout.HelpBox</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016916.jpg" alt="b688f2f791afe2367075b5f23a0e64df_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EditorGUILayout.HelpBox(<span class="string">&quot;一般提示，你应该这样做...&quot;</span>, MessageType.Info);</span><br><span class="line">EditorGUILayout.HelpBox(<span class="string">&quot;警告提示，你可能需要这样做...&quot;</span>, MessageType.Warning);</span><br><span class="line">EditorGUILayout.HelpBox(<span class="string">&quot;错误提示，你不能这样做...&quot;</span>, MessageType.Error);</span><br></pre></td></tr></table></figure>

<h3 id="2-间隔（Space）"><a href="#2-间隔（Space）" class="headerlink" title="2. 间隔（Space）"></a>2. 间隔（Space）</h3><p>关键字：EditorGUILayout.Space，GUILayout.FlexibleSpace</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016917.png" alt="eb3f93134586b92b8566938c04f29146_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">EditorGUILayout.LabelField(<span class="string">&quot;----上面的Label----&quot;</span>);</span><br><span class="line">EditorGUILayout.Space(<span class="number">10</span>); <span class="comment">//进行10个单位的间隔</span></span><br><span class="line">EditorGUILayout.LabelField(<span class="string">&quot;----下面的Label----&quot;</span>);</span><br><span class="line"></span><br><span class="line">EditorGUILayout.BeginHorizontal(); <span class="comment">//开始水平布局</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;1号button&quot;</span>, GUILayout.Width(<span class="number">200</span>)); <span class="comment">//固定button长度： 200</span></span><br><span class="line">GUILayout.FlexibleSpace(); <span class="comment">// 自动填充间隔，如果窗口宽600px，那这种写法就是：【左button：200px】【自动间隔：200px】【右button ：200px】</span></span><br><span class="line">GUILayout.Button(<span class="string">&quot;2号button&quot;</span>, GUILayout.Width(<span class="number">200</span>));<span class="comment">//固定button长度： 200</span></span><br><span class="line">EditorGUILayout.EndHorizontal(); <span class="comment">//结束水平布局</span></span><br></pre></td></tr></table></figure>

<h3 id="3-GUILayout-派生控件"><a href="#3-GUILayout-派生控件" class="headerlink" title="3. GUILayout 派生控件"></a>3. GUILayout 派生控件</h3><p>【EditorGUILayout 】本就是基于【GUILayout】进行的派生，用于 Editor GUI 的绘制，很多时候【<a target="_blank" rel="noopener" href="http://editorguilayout.xxx()/">http://EditorGUILayout.xxx()</a>】甚至完全可以用【<a target="_blank" rel="noopener" href="http://guilayout.xxx()/">http://GUILayout.xxx()</a>】代替。</p>
<p>当然，这两个类都有独自的一些控件，比如只有【GUILayout.Button】，只有【EditorGUILayout.Foldout】，有时候想要的控件在【EditorGUILayout】里找不到就去【GUILayout】里面找，反之亦然。</p>
<p>下面简单举例一些布局操作。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Vector2 scrollRoot;</span><br><span class="line">...</span><br><span class="line">EditorGUILayout.BeginHorizontal(); <span class="comment">//开始水平布局</span></span><br><span class="line"><span class="comment">//一大堆控件...</span></span><br><span class="line">EditorGUILayout.EndHorizontal();<span class="comment">//结束水平布局</span></span><br><span class="line"></span><br><span class="line">EditorGUILayout.BeginVertical();<span class="comment">//开始垂直布局</span></span><br><span class="line"><span class="comment">//一大堆控件...</span></span><br><span class="line">EditorGUILayout.EndVertical();<span class="comment">//结束垂直布局</span></span><br><span class="line"></span><br><span class="line">scrollRoot = EditorGUILayout.BeginScrollView(scrollRoot); <span class="comment">//开启滚动视图</span></span><br><span class="line"><span class="comment">//一大堆控件...</span></span><br><span class="line">EditorGUILayout.EndScrollView(); <span class="comment">//结束滚动视图</span></span><br></pre></td></tr></table></figure>

<h1 id="4-Gizmos"><a href="#4-Gizmos" class="headerlink" title="4 Gizmos"></a>4 Gizmos</h1><p><strong>关键字</strong>： <a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/Gizmos.html">Gizmos</a>，Monobehavior. OnDrawGizmos (), DrawLine，DrawRay，DrawSphere</p>
<p>这两者是在 Scene 视图下，进行图形绘制。</p>
<p>比如一个经典应用：画出 AI 敌人的视锥范围，就可以用 Gizmos. DraeRay 进行绘制，便于 Debug。</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016918.jpg" alt="4b6f52a7617ac64245693f22a61b22ba_MD5"></p>
<h2 id="一、-Gizmos-基础介绍"><a href="#一、-Gizmos-基础介绍" class="headerlink" title="一、 Gizmos 基础介绍"></a>一、 Gizmos 基础介绍</h2><p>官方文档： <a target="_blank" rel="noopener" href="https://docs.unity3d.com/Manual/GizmosAndHandles.html">Important Classes - Gizmos &amp; Handles</a></p>
<p>Important Classes - Gizmos &amp; Handles<br>The Gizmos and Handles classes allows you to draw lines and shapes in the <strong>Scene</strong> view and Game view, as well as interactive handles and controls. These two classes together provide a way for you to extend what is shown in these views and build interactive tools to edit your project in any way you like. For example, rather than entering numbers in the <strong>inspector</strong>, you could create a draggable circle radius gizmo around a non-player character in a game, which represents the area within which they can hear or see the player.<br>This page provides a simple overview of the Gizmos and Handles classes. For full documentation and an exhaustive reference of every member of the Gizmos and Handles classes, see the script reference pages for <a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/Gizmos.html">Gizmos</a> and <a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/Handles.html">Handles</a>.<br>重要的类： Gizmos 与 Handles<br>Gizmos 与 Handles 类允许你在 “SceneView”（场景视图）与 “GameView”（游戏视图）中绘制线段与图形，或是可交互控制柄（比如 Transform 移动的三轴箭头）<br>这两者一同作用，能让用户在这些视图中自定义扩展显示信息，或是构建自己喜欢的编辑、操作工具。<br>比如，相比起在 Inspector（检视器）中输入数字，你可以在游戏里创建一个可拖拽的圆环附着在 NPC 上，这代表了 NPC 发现玩家的视听检测范围。<br>本页面仅简单介绍了 Gizmos 与 Handles 的概览，对于详尽的文档与参考，请见：<a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/Gizmos.html">Gizmos</a> <a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/Handles.html">Handles</a></p>
<p>简单地说，Gizmos 与 Handles 主要用于开发编辑中，可视化一些数据信息，便于 Debug。</p>
<h2 id="二、-Gizmos-使用方式"><a href="#二、-Gizmos-使用方式" class="headerlink" title="二、 Gizmos 使用方式"></a>二、 Gizmos 使用方式</h2><p>关键字： MonoBehaviour.OnDrawGizmos， MonoBehaviour.OnDrawGizmosSelected</p>
<p>Gizmos 能且只能在 MonoBehaviour 相关子类中，使用特定的函数调用，其中：</p>
<p><strong>OnDrawGizmos()</strong> 在每帧调佣。所有在 OnDrawGizmos 中的渲染都是可见的。</p>
<p><strong>OnDrawGizmosSelected()</strong> 仅在脚本附加的物体被选择时调用。</p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">GizmosTutotial</span> : <span class="title">MonoBehaviour</span> <span class="comment">//新建脚本，继承自Mono</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Vector3 size = <span class="keyword">new</span> Vector3(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>); <span class="comment">//定义Cube大小</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnDrawGizmos</span>() <span class="comment">//定义OnDrawGizmos方法，类似于Start，Update的定义方式 &#123;</span></span></span><br><span class="line"><span class="function">        Gizmos.<span class="title">DrawCube</span>(<span class="params">Vector3.zero, size</span>)</span>; <span class="comment">//使用Gizmos绘制一个Cube</span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将此脚本挂载在场景中的 Gameobject 上，我们可以看见：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016919.png" alt="230b9cf4b478676cf3d767ebaccc3000_MD5"></p>
<p>值得注意的是，场景上方工具栏的【Gizmos】开关定义了全局 “是否显示 Gizmos”，如果我们把此按钮取消激活，场景将不会绘制任何 Gizmos 图形。当然，点开小三角，能看见更详细的设置信息。</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016920.png" alt="869ed04cd52a29e64e953a32ed7c70b5_MD5"></p>
<h2 id="三、-Gizmos-基本绘制-API"><a href="#三、-Gizmos-基本绘制-API" class="headerlink" title="三、 Gizmos 基本绘制 API"></a>三、 Gizmos 基本绘制 API</h2><p>注：本文不会对所有的 API 的全部定义进行讲解，一个方法实际存在多种重载，只介绍最基本最常用的方法；若想查看方法详细情况与重载，请自行在 Visual Studio 中 “转到定义”。</p>
<h3 id="1-立方体（Cube）"><a href="#1-立方体（Cube）" class="headerlink" title="1. 立方体（Cube）"></a>1. 立方体（Cube）</h3><p>关键字： Gizmos.DrawCube</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016921.jpg" alt="c326a9a6763c84c4bfd12db2dfc8df8d_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">GizmosTutotial</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnDrawGizmos</span>()</span> &#123;</span><br><span class="line">        Gizmos.DrawCube(Vector3.zero, Vector3.one); </span><br><span class="line">        <span class="comment">//参数释义： 1.Cube中心点 2.Cube大小</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：为了方便起见，下文将省略 Mono 类定义与 OnDrawGizmos 定义，请记得所有 Gizmos 方法都是在 OnDrawGizmos&#x2F;OnDrawGizmosSelected 中使用。</p>
<h3 id="2-视锥（Frustum）"><a href="#2-视锥（Frustum）" class="headerlink" title="2. 视锥（Frustum）"></a>2. 视锥（Frustum）</h3><p>关键字：Gizmos.DrawFrustum</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016922.jpg" alt="353da638ae7dc1e42065f6972480eabf_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Gizmos.DrawFrustum(Vector3.zero, <span class="number">60</span>, <span class="number">300</span>, <span class="number">0.3f</span>, <span class="number">1.7f</span>); </span><br><span class="line"><span class="comment">//参数释义：1. 绘制中心 2. FOV角度 3. 远裁切平面 4. 近裁切平面 5. aspect 屏幕长宽比</span></span><br></pre></td></tr></table></figure>

<h3 id="3-贴图（Texture）"><a href="#3-贴图（Texture）" class="headerlink" title="3. 贴图（Texture）"></a>3. 贴图（Texture）</h3><p>关键字：Gizmos.DrawGUITexture</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016923.jpg" alt="9391233742dad45977fa2f6d68285e26_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Texture texture;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">if</span> (texture != <span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Gizmos.DrawGUITexture(<span class="keyword">new</span> Rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">10</span>), texture); <span class="comment">//1.指定Rect 2.指定贴图</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-图标（Icon）"><a href="#4-图标（Icon）" class="headerlink" title="4. 图标（Icon）"></a>4. 图标（Icon）</h3><p>关键字： Gizmos.DrawIcon</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016924.png" alt="1800ab02ededdc321459bee495b37d9b_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Gizmos.DrawIcon(Vector3.up, <span class="string">&quot;MyIcon&quot;</span>); <span class="comment">//1.绘制中心 2.图标名</span></span><br></pre></td></tr></table></figure>

<p>注： 此处图标名 “MyIcon” 是指在路径：“Assets&#x2F;Gizmos&#x2F;…”中的图片名称。</p>
<p>DrawIcon 的前提是在资源文件夹 “Gizmos” 中存放想绘制的图片，定义好名称后，在代码中调用。</p>
<p>此处图片全路径为：“Assets&#x2F;Gizmos&#x2F;MyIcon.png”，所以写 “MyIcon”。</p>
<p>值得注意的是，所有在 Gizmos&#x2F;Handles 中的绘制都不会发布到实际游戏中，只是在使用 Editor 开发时作为可视化辅助工具。</p>
<h3 id="5-线段（Line）"><a href="#5-线段（Line）" class="headerlink" title="5. 线段（Line）"></a>5. 线段（Line）</h3><p>关键字： Gizmos.DrawLine</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016925.png" alt="460b98a3ba29a85b6ab7a8fa8e6c10d5_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Gizmos.DrawLine(Vector3.zero, Vector3.one);  <span class="comment">//1.from（线段起点） 2.to（线段终点）</span></span><br></pre></td></tr></table></figure>

<h3 id="6-网格（Mesh）"><a href="#6-网格（Mesh）" class="headerlink" title="6. 网格（Mesh）"></a>6. 网格（Mesh）</h3><p>关键字：Gizmos.DrawMesh</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016926.png" alt="561945fbcf6d8d26a26b6b1a7cc988d5_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Mesh mesh;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">if</span> (mesh != <span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Gizmos.DrawMesh(mesh, <span class="number">0</span>); <span class="comment">//1. mesh 2.submeshIndex</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-射线（Ray）"><a href="#7-射线（Ray）" class="headerlink" title="7. 射线（Ray）"></a>7. 射线（Ray）</h3><p>关键字：Gizmos.DrawRay</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016927.png" alt="235beaaba702c9a58866666a7f1e066e_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Gizmos.DrawRay(Vector3.zero, Vector3.one); <span class="comment">//1.from 2.direction</span></span><br></pre></td></tr></table></figure>

<h3 id="8-球体（Sphere）"><a href="#8-球体（Sphere）" class="headerlink" title="8. 球体（Sphere）"></a>8. 球体（Sphere）</h3><p>关键字：Gizmos.DrawSphere</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016928.jpg" alt="247b28c04497b05b489e9cf139243735_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Gizmos.DrawSphere(Vector3.up, <span class="number">1</span>); <span class="comment">//1.center 2.radius</span></span><br></pre></td></tr></table></figure>

<h3 id="9-网格线（Wire）"><a href="#9-网格线（Wire）" class="headerlink" title="9. 网格线（Wire）"></a>9. 网格线（Wire）</h3><p>关键字：Gizmos.DrawWireCube</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016929.png" alt="6b5a54c7edbceda19a193e2bc8704d0f_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Mesh mesh;</span><br><span class="line">...</span><br><span class="line">Gizmos.DrawWireCube(Vector3.left, Vector3.one);</span><br><span class="line">Gizmos.DrawWireSphere(Vector3.right, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span> (mesh != <span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Gizmos.DrawWireMesh(mesh, <span class="number">0</span>, Vector3.forward);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-颜色设置（Color）"><a href="#10-颜色设置（Color）" class="headerlink" title="10. 颜色设置（Color）"></a>10. 颜色设置（Color）</h3><p>关键字：Gizmos.Color</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016930.png" alt="cb750620477aa4572ab72c03dace9c16_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Gizmos.color = Color.red;</span><br><span class="line">Gizmos.DrawSphere(Vector3.left, <span class="number">0.5f</span>);</span><br><span class="line">Gizmos.color = Color.green;</span><br><span class="line">Gizmos.DrawCube(Vector3.zero, Vector3.one);</span><br><span class="line">Gizmos.color = Color.blue;</span><br><span class="line">Gizmos.DrawLine(Vector3.right, Vector3.right * <span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<h3 id="11-矩阵设置（Matrix）"><a href="#11-矩阵设置（Matrix）" class="headerlink" title="11. 矩阵设置（Matrix）"></a>11. 矩阵设置（Matrix）</h3><p>关键字：Gizmos.matrix</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016931.png" alt="02f55548fd2da5c59c1c0cd89c8c9edf_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Gizmos.matrix = <span class="keyword">this</span>.transform.localToWorldMatrix; <span class="comment">//这里使用挂载transform进行举例</span></span><br><span class="line">Gizmos.DrawWireSphere(Vector3.zero, <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>如果不对 Gizmos 的矩阵进行设置，默认为单位矩阵。</p>
<h2 id="四、-Gizmos-经验使用"><a href="#四、-Gizmos-经验使用" class="headerlink" title="四、 Gizmos 经验使用"></a>四、 Gizmos 经验使用</h2><h3 id="1-绘制圆环（Circle）"><a href="#1-绘制圆环（Circle）" class="headerlink" title="1. 绘制圆环（Circle）"></a>1. 绘制圆环（Circle）</h3><p>由于 Gizmos 没有自带的圆环绘制 API，这里我们使用 DrawLine 自行计算圆环线段来实现圆环绘制。</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016932.png" alt="022c8ae91e340dd2f539356a8be0a7ff_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Transform player; <span class="comment">//绑定player</span></span><br><span class="line"><span class="keyword">public</span> Transform enemy; <span class="comment">//绑定enemy</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">if</span> (player != <span class="literal">null</span> &amp;&amp; enemy != <span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Gizmos.color = Color.green; <span class="comment">//设置绿色</span></span><br><span class="line">    Gizmos.DrawSphere(player.position, <span class="number">0.5f</span>); <span class="comment">//在player处绘制球体</span></span><br><span class="line">    Gizmos.color = Color.red; <span class="comment">//设置红色</span></span><br><span class="line">    Gizmos.DrawSphere(enemy.position, <span class="number">0.5f</span>); <span class="comment">//在enemy处绘制球体</span></span><br><span class="line">    Gizmos.color = Color.yellow; <span class="comment">//设置黄色</span></span><br><span class="line">    Gizmos.DrawLine(player.position, enemy.position); <span class="comment">//绘制线段连接player enemy</span></span><br><span class="line">    DrawCircle(enemy, <span class="number">3</span>, <span class="number">0.1f</span>, Color.red); <span class="comment">//绘制半径3的红色圆环</span></span><br><span class="line">    DrawCircle(enemy, <span class="number">5</span>, <span class="number">0.1f</span>, Color.green); <span class="comment">//绘制半径5的绿色圆环</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// theta越小，线段绘制数越多，圆环越平滑。</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawCircle</span>(<span class="params">Transform transform, <span class="built_in">float</span> radius, <span class="built_in">float</span> theta, Color color</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> matrix = Gizmos.matrix; <span class="comment">//保存原本的矩阵信息</span></span><br><span class="line">    Gizmos.matrix = transform.localToWorldMatrix; <span class="comment">//应用目标trans矩阵信息</span></span><br><span class="line">    Gizmos.color = color; <span class="comment">//设置颜色</span></span><br><span class="line">    Vector3 beginPoint = <span class="keyword">new</span> Vector3(radius, <span class="number">0</span>, <span class="number">0</span>); <span class="comment">//定义起始点</span></span><br><span class="line">    Vector3 firstPoint = <span class="keyword">new</span> Vector3(radius, <span class="number">0</span>, <span class="number">0</span>); <span class="comment">//定义起始点</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">float</span> t = <span class="number">0</span>; t &lt; <span class="number">2</span> * Mathf.PI; t += theta) <span class="comment">//循环线段绘制</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">float</span> x = radius * Mathf.Cos(t); <span class="comment">//计算cos</span></span><br><span class="line">        <span class="built_in">float</span> z = radius * Mathf.Sin(t); <span class="comment">//计算sin</span></span><br><span class="line">        Vector3 endPoint = <span class="keyword">new</span> Vector3(x, <span class="number">0</span>, z); <span class="comment">//确定圆环采样点</span></span><br><span class="line">        Gizmos.DrawLine(beginPoint, endPoint); <span class="comment">//绘制线段</span></span><br><span class="line">        beginPoint = endPoint; <span class="comment">//迭代赋值</span></span><br><span class="line">    &#125;</span><br><span class="line">    Gizmos.DrawLine(firstPoint, beginPoint); <span class="comment">//绘制最后一段</span></span><br><span class="line">    Gizmos.matrix = matrix; <span class="comment">//还原Gizmos矩阵信息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-绘制弧线（Arc）"><a href="#2-绘制弧线（Arc）" class="headerlink" title="2. 绘制弧线（Arc）"></a>2. 绘制弧线（Arc）</h3><p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016933.png" alt="37cedb4fd956ac6e14e8bb9e95d0aacf_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Transform enemy;</span><br><span class="line">...</span><br><span class="line">Gizmos.color = Color.red;</span><br><span class="line">Gizmos.DrawSphere(enemy.position, <span class="number">0.5f</span>);</span><br><span class="line">DrawArc(enemy, <span class="number">1</span>, <span class="number">90</span>, <span class="number">0.1f</span>, Color.green);</span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawArc</span>(<span class="params">Transform transform, <span class="built_in">float</span> radius, <span class="built_in">float</span> angle, <span class="built_in">float</span> theta, Color color</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> matrix = Gizmos.matrix;</span><br><span class="line">    Gizmos.matrix = transform.localToWorldMatrix;</span><br><span class="line">    Gizmos.color = color;</span><br><span class="line">    Vector3 beginPoint = Vector3.zero;</span><br><span class="line">    Vector3 firstPoint = Vector3.zero;</span><br><span class="line">    <span class="keyword">var</span> rad = Mathf.Deg2Rad * angle;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">float</span> t = <span class="number">0</span>; t &lt; rad; t += theta)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">float</span> x = radius * Mathf.Cos(t);</span><br><span class="line">        <span class="built_in">float</span> z = radius * Mathf.Sin(t);</span><br><span class="line">        Vector3 endPoint = <span class="keyword">new</span> Vector3(x, <span class="number">0</span>, z);</span><br><span class="line">        Gizmos.DrawLine(beginPoint, endPoint);</span><br><span class="line">        beginPoint = endPoint;</span><br><span class="line">    &#125;</span><br><span class="line">    Gizmos.DrawLine(firstPoint, beginPoint);</span><br><span class="line">    Gizmos.matrix = matrix;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>值得注意的是，这种弧线的绘制算法，以单位圆为例，起点是从局部坐标（1,0,0）开始，也就是相对于 forward 的 right 方向，90 度弧线实际扫过的面积是从 right(1,0,0) 到 forward(0,0,1) 的面积。</p>
<p>所以这种算法不适用于 AI 视锥感知范围的绘制（90 度视觉范围应该是相对于 forward 方向的左右各 45 度）。</p>
<p>如何修改，那就是简单的数学题了，就待读者自行计算了。</p>
<h2 id="五、小结"><a href="#五、小结" class="headerlink" title="五、小结"></a>五、小结</h2><p>Gizmos 提供了基本的图形绘制，而场景文本（Text）绘制则是由 UnityEditor.Handles.Label 提供，我们将在后续介绍中对 Handles 进行说明。</p>
<h1 id="5-Handles"><a href="#5-Handles" class="headerlink" title="5 Handles"></a>5 Handles</h1><p><strong>关键字</strong>：SceneView， <a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/Handles.html">3D GUI</a>，<a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/Editor.OnSceneGUI.html">Editor.OnSceneGUI()</a>, 3D Label</p>
<p>主要是在 Scene View 下，用于显示 &#x2F; 控制物体的某些属性，便于 Debug 查看。</p>
<p>比如 Collider (碰撞盒) 的绿色线框就属于 Handles 的处理。</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016934.png" alt="a13d231c147c8f089ac7c43edf98083a_MD5"></p>
<h2 id="一、-Handles-基础介绍"><a href="#一、-Handles-基础介绍" class="headerlink" title="一、 Handles 基础介绍"></a>一、 Handles 基础介绍</h2><p><a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/Handles.html">Handles</a><br>Custom 3D GUI controls and drawing in the Scene view.<br>Handles are the 3D controls that Unity uses to manipulate items in the Scene view. There are a number of built-in Handle GUIs, such as the familiar tools to position, scale and rotate an object via the Transform component. However, it is also possible to define your own Handle GUIs to use with custom component editors. Such GUIs can be a very useful way to edit procedurally-generated Scene content, “invisible” items and groups of related objects, such as waypoints and location markers.<br>在 Sceneview（场景视图中）自定义 3D GUI 控制器与绘制的类<br>Handles 是 Unity 在场景视图中，用于操控物体的 3D 控制器，已内置许多操作 GUI，比如我们熟悉的基于 Transform 对位置、缩放、旋转坐标的操作工具。当然，我们使用自定义的 Editor，定义自己的 Handle GUI 操作显示也是可能的。这种 GUIs 将会非常有用于程序化生成的场景内容、“不可见” 的子对象与组。比如路径点与坐标标记点。</p>
<p>一言以蔽之，许多需要在场景中程序化生成的数据，使用 Handles 类能轻松地显示控制柄来进行编辑，典型使用就是 “地编”。</p>
<h2 id="二、-Handles-使用方式"><a href="#二、-Handles-使用方式" class="headerlink" title="二、 Handles 使用方式"></a>二、 Handles 使用方式</h2><h3 id="1-基于-Editor-类的-OnSceneGUI"><a href="#1-基于-Editor-类的-OnSceneGUI" class="headerlink" title="1. 基于 Editor 类的 OnSceneGUI"></a>1. 基于 Editor 类的 OnSceneGUI</h3><p>在继承自 Editor 的类中，可以定义【OnSceneGUI()】</p>
<p>这样当此 Edtior 在活跃状态时（比如一个 Inspector 面板展开），在【OnSceneGUI()】方法内的内容将根据 SceneView 的刷新而调用，触发对应逻辑。</p>
<p>比如进行基本定义：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">------HandlesMono .cs------</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">HandlesMono</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">------HandlesMonoEditor.cs------</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line">[<span class="meta">CustomEditor(typeof(HandlesMono))</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">HandlesMonoEditor</span> : <span class="title">Editor</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnSceneGUI</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">&quot;在Editor OnSceneGUI中 调用....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在【Hierarchy】中新建空对象，挂载脚本，点击对象在【Inspector】中显示【HandlesMono】信息，就可以看见信息打印：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016935.png" alt="b5dd698c4179afbc91c46102d969fb36_MD5"></p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016936.png" alt="feba4702e358e90d9f14246482a816e2_MD5"></p>
<p>当然，如果在【Hierarchy】中不选择对应物体，则【HandlesMono】不在检视器中显示，意味着【HandlesMono】 Disable 掉了，将不会调用【OnSceneGUI】，读者可自行尝试。</p>
<p>（Tips：如果想要它一直调用，但是又需要选择其他对象怎么办呢？可以点击【Inspector】右侧的【锁】按钮，加锁之后只会显示当前的【Inspector】信息，不会随着选择而更改。）</p>
<h3 id="2-基于-EditorWindow-的手动注册"><a href="#2-基于-EditorWindow-的手动注册" class="headerlink" title="2. 基于 EditorWindow 的手动注册"></a>2. 基于 EditorWindow 的手动注册</h3><p>有些时候，我们更想在一个 Window 中进行数据编辑与操作，但是 EditorWindow 可没有 OnSceneGUI，怎么办呢？这时候，需要手动对 SceneView 的刷新事件进行注册了。</p>
<p>比如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">using UnityEngine;</span><br><span class="line">using UnityEditor;</span><br><span class="line">public class HandlesWindow : EditorWindow</span><br><span class="line">&#123;</span><br><span class="line">    public static HandlesWindow m_mainWindow;</span><br><span class="line"></span><br><span class="line">    [MenuItem(&quot;MyWindows/HandlesWindow&quot;)]</span><br><span class="line">    public static void OpenWindow() //打开窗口</span><br><span class="line">    &#123;</span><br><span class="line">        m_mainWindow = EditorWindow.GetWindow&lt;HandlesWindow&gt;();</span><br><span class="line">        m_mainWindow.Show();</span><br><span class="line">    &#125;</span><br><span class="line">    private void OnEnable() </span><br><span class="line">    &#123;</span><br><span class="line">        SceneView.duringSceneGui += OnSceneGUI; //对SceneView的刷新事件进行注册</span><br><span class="line">    &#125;</span><br><span class="line">    private void OnDisable() </span><br><span class="line">    &#123;</span><br><span class="line">        SceneView.duringSceneGui -= OnSceneGUI; //对SceneView的刷新事件取消注册</span><br><span class="line">    &#125;</span><br><span class="line">    private void OnSceneGUI(SceneView sceneView) //自定义刷新事件的委托方法</span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(&quot;在 Window OnSceneGUI中 调用....&quot;); //具体逻辑</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016937.jpg" alt="6eef0d8aab13398992d5c8e8b5387213_MD5"></p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016938.png" alt="75d8ed240c4130f4c71c7dcfd9674857_MD5"></p>
<p>注：下文实例代码都是在 EditorWindow 中编写调用。</p>
<h2 id="三、-Handles-基本绘制方法"><a href="#三、-Handles-基本绘制方法" class="headerlink" title="三、 Handles 基本绘制方法"></a>三、 Handles 基本绘制方法</h2><h3 id="1-Label（文本）"><a href="#1-Label（文本）" class="headerlink" title="1. Label（文本）"></a>1. Label（文本）</h3><p>关键字： Handles.Label</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016939.png" alt="dfa8e9f3785f7d0da3fd4b43c3989310_MD5"></p>
<p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">private Vector3 labelPos = Vector3.zero;</span><br><span class="line">private string labelText = &quot;这是在Handles中绘制的文本信息！！！&quot;;</span><br><span class="line">...</span><br><span class="line">//Window GUI 绘制（使用EditorGUILayout）</span><br><span class="line">...</span><br><span class="line">Handles.Label(labelPos, labelText); // 绘制Label</span><br></pre></td></tr></table></figure>

<p>注：EditorWindow 的绘制只是为了显示信息方便，Editor 绘制方式见：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/505159658">Unity Editor 编辑器扩展功能详解（3）</a></p>
<h3 id="2-Line-Dotted-Line（线段-虚线）"><a href="#2-Line-Dotted-Line（线段-虚线）" class="headerlink" title="2. Line&#x2F;Dotted Line（线段 &#x2F; 虚线）"></a>2. Line&#x2F;Dotted Line（线段 &#x2F; 虚线）</h3><p>关键字： Handles.DrawLine，Handles.DrawDottedLine</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016940.png" alt="79d7db52823fd45f874ee7924ea77271_MD5"></p>
<p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//1.from 2.to 3.thickness（厚度）决定线段厚度</span><br><span class="line">Handles.DrawLine(Vector3.zero, new Vector3(-1, 1, 1), 2f);</span><br><span class="line">//1.from 2.to 3.ScreenSpaceSize（屏幕空间大小）决定虚线长度</span><br><span class="line">Handles.DrawDottedLine(Vector3.zero, Vector3.one, 2f);</span><br></pre></td></tr></table></figure>

<h3 id="3-Arc-Disc（弧线-圆环）"><a href="#3-Arc-Disc（弧线-圆环）" class="headerlink" title="3. Arc&#x2F;Disc（弧线 &#x2F; 圆环）"></a>3. Arc&#x2F;Disc（弧线 &#x2F; 圆环）</h3><p>关键字：Handles.DrawWireArc，Handles.DrawSolidDisc</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016941.png" alt="e7912229603646508f07c34b76b1e48e_MD5"></p>
<p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Handles.color = new Color(1, 0, 0, 0.3f); //提前使用Color进行颜色设置，便于观察</span><br><span class="line">Handles.DrawWireArc(Vector3.zero, Vector3.up, Vector3.right, 90, 2); //绘制线框弧线</span><br><span class="line">Handles.DrawSolidArc(Vector3.zero, Vector3.up, Vector3.back, 90, 2); // 绘制填充弧线</span><br><span class="line"></span><br><span class="line">Handles.color = new Color(0, 1, 0, 0.3f);</span><br><span class="line">Handles.DrawSolidDisc(new Vector3(0, 0, 5), Vector3.up, 5); //绘制填充圆环</span><br><span class="line">Handles.DrawWireDisc(new Vector3(0, 0, -5), Vector3.up, 5); //绘制线框圆环</span><br></pre></td></tr></table></figure>

<h3 id="4-Rectangle（矩形）"><a href="#4-Rectangle（矩形）" class="headerlink" title="4. Rectangle（矩形）"></a>4. Rectangle（矩形）</h3><p>关键字：Handles.DrawSolidRectangleWithOutline</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016942.png" alt="b150ddea6ad1df033b57c2f860a6cfb1_MD5"></p>
<p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Handles.DrawSolidRectangleWithOutline(new Rect(0, 0, 1, 1), Color.green, Color.red);</span><br></pre></td></tr></table></figure>

<h3 id="5-GUI"><a href="#5-GUI" class="headerlink" title="5. GUI"></a>5. GUI</h3><p>关键字：Handles.BeginGUI()，Handles.EndGUI()</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016944.png" alt="f0b5c2458b3aa9b8d6926be1a06c05f2_MD5"></p>
<p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Handles.BeginGUI();</span><br><span class="line">GUILayout.Label(&quot;我是SceneView中的Label&quot;);</span><br><span class="line">if (GUILayout.Button(&quot;我是SceneView中的Button&quot;))</span><br><span class="line">&#123;</span><br><span class="line">    Debug.Log(&quot;芜湖&quot;);</span><br><span class="line">&#125;</span><br><span class="line">Handles.EndGUI();</span><br></pre></td></tr></table></figure>

<h2 id="四、-控制柄"><a href="#四、-控制柄" class="headerlink" title="四、 控制柄"></a>四、 控制柄</h2><p>实际上，Handles 核心功能是他的 Handle（控制）类，比如：Handles.PositionHandle 就是一个类似于 Position 移动的方法。经典使用例就是在一个 <code>List&lt;Vector3&gt;</code> 列表中，选择某个列表元素显示他的 Position 控制柄，然后进行移动。</p>
<p>又或者类似这种：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016945.png" alt="0cddc5ddb45f31146759d889fa0cd39e_MD5"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">private Vector3 root = Vector3.zero;</span><br><span class="line">...</span><br><span class="line">Handles.DrawSolidDisc(root, Vector3.up, 1); //画个圆，假设这是目标对象</span><br><span class="line">root = Handles.PositionHandle(root, Quaternion.identity); //控制柄</span><br></pre></td></tr></table></figure>

<p>但是笔者现阶段使用的较少，不是很熟悉，就不作解释了。</p>
<p>详情可见：<a target="_blank" rel="noopener" href="https://linxinfa.blog.csdn.net/article/details/89334603">Unity 的 Handles 类_林新发的博客 - CSDN 博客_unity 里 handle</a></p>
<p>或者看看<a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/Handles.html">官方 API 文档</a>。</p>
<p>或者是 <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/efd33e1a7e15">Unity 编辑器扩展五 Handles 扩展 Scene 视图</a></p>
<p>笔者摸了。_(:з」∠)_</p>
<h2 id="五、-小结"><a href="#五、-小结" class="headerlink" title="五、 小结"></a>五、 小结</h2><p>实际上，OnGUIScene + Handles 还有一种应用就是 “地形笔刷”，就像 Terrain 笔刷那样在 SceneView 里面刷刷刷调整高度、生成植被，这种功能我们也是能自己写一套的，核心是编辑模式下的 Event 事件。</p>
<p>具体的可见：<a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/Event.html">Unity - Scripting API: Event</a></p>
<p>有空再写，大概（</p>
<h1 id="6-Editor-常用辅助类"><a href="#6-Editor-常用辅助类" class="headerlink" title="6  Editor 常用辅助类"></a>6  Editor 常用辅助类</h1><p>本节主要介绍在编辑器扩展中，经常打交道的几个编辑器类的常用方法，他们几乎只会在 Editor 模式下使用，不会在 Runtime 使用。</p>
<p>常见的有：ScriptableObject， EditorUtility，AssetDatabase，Selection，Event 等。<br>EditorUtility， AssetDatabase， Selection</p>
<p><strong>关键字</strong>：EditorUtility, AssetDatabase, Selection, 序列化对象修改 &#x2F; 保存，资源读取 &#x2F; 保存</p>
<p><strong>EditorUtility</strong> ： unity 内置的关于 editor 使用的一些工具类，用的最多的应该是：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EditorUtility.SetDirty(Object obj); <span class="comment">//标记目标资源为“脏”</span></span><br><span class="line">AssetDatabase.SaveAssets(); <span class="comment">//保存项目内的“脏数据”</span></span><br></pre></td></tr></table></figure>

<p><strong>AssetDatabase</strong> ： 在编辑器模式下，对项目资源的管理。类似：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> T <span class="title">LoadAssetAtPath</span>&lt;<span class="title">T</span>&gt;(<span class="params"><span class="built_in">string</span> assetPath</span>)whereT:UnityEngine.Object</span>;<span class="comment">//读取路径下的资源文件</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">GetAssetPath</span>(<span class="params">UnityEngine.Object assetObject</span>)</span>;<span class="comment">//获取目标资源文件的在项目中的路径</span></span><br></pre></td></tr></table></figure>

<p><strong>Selection</strong> : 含有当前选择的资源文件 &#x2F; 文件夹的各种信息。</p>
<p>一个应用就是通过代码检索资源，然后选择目标资源，Inspector 就自动显示了目标资源文件信息。使用类似于</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Selection.activeObject = obj; <span class="comment">//obj就是目标资源文件</span></span><br></pre></td></tr></table></figure>

<h2 id="一、ScriptableObject"><a href="#一、ScriptableObject" class="headerlink" title="一、ScriptableObject"></a>一、ScriptableObject</h2><h3 id="1-简介与定义"><a href="#1-简介与定义" class="headerlink" title="1. 简介与定义"></a>1. 简介与定义</h3><p>这里初略介绍一下【ScriptableObject】，我们可以把他理解为一种存储于【硬盘】而不是【内存】上的 Config 资产文件。</p>
<p>就像一张 Excel 表一样，在一个【ScriptableObject】中配置的数据是持久化保存的。</p>
<p>简单案例：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义创建资产菜单，menuName : 路径名称， fileName：资产文件名</span></span><br><span class="line">[<span class="meta">CreateAssetMenu(menuName = <span class="string">&quot;MyConfig/SimpleObj&quot;</span>, fileName = <span class="string">&quot;SimpleScriptableObejct&quot;</span>)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SimpleScriptableObject</span> : <span class="title">ScriptableObject</span> <span class="comment">//继承自【ScriptableObject】</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">SerializeField</span>] <span class="comment">//定义序列化</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;InfoPair&gt; pairs; <span class="comment">//具体的数据字段</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="meta">System.Serializable</span>] <span class="comment">//定义序列化</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">InfoPair</span> <span class="comment">//一种数据类定义</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> someID;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> someName;</span><br><span class="line">    <span class="keyword">public</span> Texture someTex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在【Project】视图中，右键打开菜单，即可创建我们自定义的文件：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016946.png" alt="68dcf1dd61580f24c12ea5f1e6477bb7_MD5"></p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016947.png" alt="48ce37116534ede5dba3249c6792b9d4_MD5"></p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016948.png" alt="410dc809b14aad166b3e934eabf73300_MD5"></p>
<h3 id="2-基本使用"><a href="#2-基本使用" class="headerlink" title="2. 基本使用"></a>2. 基本使用</h3><p>在使用时，可以在一个 Mono 文件里面定义字段：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> SimpleScriptableObject scriptableObject; <span class="comment">//定义字段</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>() <span class="comment">//测试用，在Start时写逻辑</span></span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (scriptableObject != <span class="literal">null</span>) <span class="comment">//非空（比如提前在Inspector中赋值）</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (scriptableObject.pairs != <span class="literal">null</span> &amp;&amp; scriptableObject.pairs.Count &gt; <span class="number">0</span>) <span class="comment">//list非空且有数据</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> name = scriptableObject.pairs[<span class="number">0</span>].someName; <span class="comment">//获取下标0的数据</span></span><br><span class="line">            Debug.Log(<span class="string">$&quot;SO element name : <span class="subst">&#123;name&#125;</span>&quot;</span>); <span class="comment">//打印信息</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016949.png" alt="bca7d862ac96147daec37b74e69a6bcc_MD5"></p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016950.png" alt="7698ecdfd7b0a91f5e784889390dee0f_MD5"></p>
<p>基本上，所有的【配置数据】都可以用【ScriptableObject】保存（当然你也可以选择直接序列化为 bytes 文件，或者 json 文件等等，但是没有 unity 原生支持的 ScriptableObject 直观，而且可以直接在 Inspector 中修改数据）。</p>
<h3 id="3-Tip"><a href="#3-Tip" class="headerlink" title="3. Tip"></a>3. Tip</h3><p>值得注意的是，我们选中一个【ScriptableObject】时，在【Inspector】是有显示 GUI 的，这意味着我们也可以自定义【ScriptableObject】的【Editor】，方法就跟自定义一个【MonoBehaviour】的【Editor】一样。</p>
<p>同时，手动在【ScriptableObject】面板中写入数据也不是我们想要的，更多是使用代码对其进行数据填充（比如读取一张 Excel 的数据转换成【ScriptableObject】保存形式）</p>
<h3 id="4-保存方式（重要）"><a href="#4-保存方式（重要）" class="headerlink" title="4. 保存方式（重要）"></a>4. 保存方式（重要）</h3><p>但是！重点来了，我们在【Inspector】中的数据填充操作，编辑器是自动标识 “脏数据” 且刷新保存的，如果使用【代码填充】数据，切记使用以下方法进行保存！否则数据将不会保存！</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一般这段代码写在EditorWindow的OnGUI()的某个button下，实现“点击保存”功能</span></span><br><span class="line">EditorUtility.SetDirty(simpleScriptableObject); <span class="comment">//标记脏数据</span></span><br><span class="line">AssetDatabase.SaveAssets(); <span class="comment">//对所有未写入硬盘保存的脏数据信息保存</span></span><br></pre></td></tr></table></figure>

<h3 id="5-使用代码创建-ScriptableObject"><a href="#5-使用代码创建-ScriptableObject" class="headerlink" title="5. 使用代码创建 ScriptableObject"></a>5. 使用代码创建 ScriptableObject</h3><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> simpleScriptableObject = ScriptableObject.CreateInstance&lt;SimpleScriptableObject&gt;();</span><br><span class="line"><span class="comment">//值得注意的是，这种创建方式没有创建资产实例，仅仅是在内存中创建，不会保存在硬盘上。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//如果想保存在硬盘上，需要使用如下方式</span></span><br><span class="line">AssetDatabase.CreateAsset(simpleScriptableObject, <span class="string">&quot;Assets/SomePath/simpleSO.asset&quot;</span>);</span><br><span class="line"><span class="comment">//记得路径必须合法，也要加上文件后缀</span></span><br></pre></td></tr></table></figure>

<h2 id="二、EditorUtility"><a href="#二、EditorUtility" class="headerlink" title="二、EditorUtility"></a>二、EditorUtility</h2><p>Utility：有用的，多功能的；</p>
<h3 id="1-脏标记"><a href="#1-脏标记" class="headerlink" title="1. 脏标记"></a>1. 脏标记</h3><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EditorUtility.SetDirty(someObject); <span class="comment">//使用例见上文</span></span><br></pre></td></tr></table></figure>

<h3 id="2-提示框"><a href="#2-提示框" class="headerlink" title="2. 提示框"></a>2. 提示框</h3><p>关键字： <code>EditorUtility.DisplayDialog</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016951.jpg" alt="fb5553cb9937a0b0535b6c1b20fa8aa8_MD5"></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> flag = EditorUtility.DisplayDialog(<span class="string">&quot;标题&quot;</span>, <span class="string">&quot;显示消息&quot;</span>, <span class="string">&quot;确认键&quot;</span>);</span><br><span class="line"><span class="comment">//当然，这方法有许多重载，请自行查看</span></span><br></pre></td></tr></table></figure>

<h3 id="3-进度条"><a href="#3-进度条" class="headerlink" title="3. 进度条"></a>3. 进度条</h3><p>关键字：<code>EditorUtility.DisplayProgressBar</code>，<code>EditorUtility.ClearProgressBar</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016952.jpg" alt="426cc503ce17f12ec699f1da030a7d9d_MD5"></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">float</span> <span class="keyword">value</span>; <span class="comment">//定义进度条填充值</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>() <span class="comment">//EditorWindow.OnGUI</span></span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;增加进度&quot;</span>)) <span class="comment">//手动增加进度</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">value</span> += <span class="number">0.1f</span>;</span><br><span class="line">        <span class="keyword">value</span> = Mathf.Clamp01(<span class="keyword">value</span>); <span class="comment">//约束value值到0~1</span></span><br><span class="line">    &#125;</span><br><span class="line">    EditorUtility.DisplayProgressBar(<span class="string">&quot;进度条&quot;</span>, <span class="string">&quot;显示信息&quot;</span>, <span class="keyword">value</span>); <span class="comment">//显示进度条</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">value</span> == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        EditorUtility.ClearProgressBar(); <span class="comment">//关闭进度条</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当然还有其他许多 API，有兴趣请自行查看。</p>
<h2 id="三、EditorGUIUtility"><a href="#三、EditorGUIUtility" class="headerlink" title="三、EditorGUIUtility"></a>三、EditorGUIUtility</h2><h3 id="1-搜索框（ObjectPicker）"><a href="#1-搜索框（ObjectPicker）" class="headerlink" title="1. 搜索框（ObjectPicker）"></a>1. 搜索框（ObjectPicker）</h3><p>关键字：<code>EditorGUIUtility.ShowObjectPicker</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016953.png" alt="5277cb8972d511418d6ad5eef823e871_MD5"></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Texture tex;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;查找法线贴图&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//参数释义</span></span><br><span class="line">    <span class="comment">//1. 查找对象的引用</span></span><br><span class="line">    <span class="comment">//2. 是否允许查找场景对象</span></span><br><span class="line">    <span class="comment">//3. 查找对象名称过滤（比如这里的normal是指文件名称中有normal的会被搜索到）</span></span><br><span class="line">    <span class="comment">//4. controlID, 默认写0</span></span><br><span class="line">    EditorGUIUtility.ShowObjectPicker&lt;Texture&gt;(tex, <span class="literal">false</span>, <span class="string">&quot;normal&quot;</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-选中提示"><a href="#2-选中提示" class="headerlink" title="2. 选中提示"></a>2. 选中提示</h3><p>关键字： <code>EditorGUIUtility.PingObject</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016954.png" alt="320ac44a2c417315841697148ad8975b_MD5"></p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016955.png" alt="8eb96a2237f68ef176e19e4983b260b5_MD5"></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EditorGUIUtility.PingObject(someObj);</span><br></pre></td></tr></table></figure>

<h2 id="四、AssetDatabase"><a href="#四、AssetDatabase" class="headerlink" title="四、AssetDatabase"></a>四、AssetDatabase</h2><h3 id="1-获取资产路径"><a href="#1-获取资产路径" class="headerlink" title="1. 获取资产路径"></a>1. 获取资产路径</h3><p>关键字：<code>AssetDatabase.GetAssetPath</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016956.png" alt="faf4c132f496496724877bdc08c1d51d_MD5"></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Texture tex;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">string</span> path;</span><br><span class="line">...</span><br><span class="line">tex = EditorGUILayout.ObjectField(tex, <span class="keyword">typeof</span>(Texture), <span class="literal">false</span>) <span class="keyword">as</span> Texture;</span><br><span class="line"><span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;获取文件路径&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    path = AssetDatabase.GetAssetPath(tex);</span><br><span class="line">&#125;</span><br><span class="line">EditorGUILayout.LabelField(<span class="string">&quot;资产路径是&quot;</span>, path);</span><br></pre></td></tr></table></figure>

<h3 id="2-加载资产"><a href="#2-加载资产" class="headerlink" title="2. 加载资产"></a>2. 加载资产</h3><p>关键字： <code>AssetDatabase.LoadAssetAtPath</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016957.png" alt="71a31a009effd35c61530b86b5983a8a_MD5"></p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">string</span> texPath = <span class="string">&quot;Assets/MyShaders/Brick_Normal.JPG&quot;</span>; <span class="comment">//定义好路径</span></span><br><span class="line"><span class="keyword">private</span> Texture myTex; <span class="comment">//定义好对象</span></span><br><span class="line">...</span><br><span class="line">EditorGUILayout.LabelField(<span class="string">&quot;自定义文件路径&quot;</span>, texPath);</span><br><span class="line"><span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;加载资产&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    myTex = AssetDatabase.LoadAssetAtPath&lt;Texture&gt;(texPath); <span class="comment">//加载文件</span></span><br><span class="line">&#125;</span><br><span class="line">EditorGUILayout.ObjectField(myTex, <span class="keyword">typeof</span>(Texture), <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<h3 id="3-创建资产"><a href="#3-创建资产" class="headerlink" title="3. 创建资产"></a>3. 创建资产</h3><p>关键字：<code>AssetDatabase.CreateAsset</code></p>
<p>详见上文： 5. 使用代码创建 ScriptableObject</p>
<p>实际上，【AssetDatabase】几乎涵盖了所有关于资产文件的 CRUD（增删改查）方法，其 API 的使用方式也是顾名思义，更多的请自行查阅。</p>
<h2 id="五、Selection"><a href="#五、Selection" class="headerlink" title="五、Selection"></a>五、Selection</h2><p>Selection 主要是用于<strong>返回在编辑器中的选择对象（Object）信息</strong>，这个对象（Object）可以是一份资产文件（Asset、Prefab），也可是场景中的实例对象（Gameobject）。</p>
<p>一个经典应用就是，比如在 EditorWindow 中实例化了一个对象，出于操作友好性，应该把当前选择对象直接变为生成实例，这样在【Inspector】面板中就能显示对应信息了，这种操作就是通过 Selection 类实现的。</p>
<p>（注：Selection 在命名空间 UnityEditor 中定义）</p>
<h3 id="1-Object-Selection-对象选择"><a href="#1-Object-Selection-对象选择" class="headerlink" title="1. Object Selection (对象选择)"></a>1. Object Selection (对象选择)</h3><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Selection.activeGameObejct <span class="comment">//返回当前点击的场景游戏物体或Project Prefab;选择多个则返回第一个选择；未选择则返回null</span></span><br><span class="line">Selection.activeTransform <span class="comment">//返回当前点击的场景游戏物体transform。</span></span><br><span class="line">Selection.activeObject <span class="comment">// 返回当前点击的场景游戏物体或Project资产文件。</span></span><br><span class="line"></span><br><span class="line">Selection.gameObjects <span class="comment">//返回一个数组，内容为当前点击场景物体或Project Prefab，非GameObject的选择不会加入数组。未选择返回长度为0的数组</span></span><br><span class="line">Selection.objects <span class="comment">//返回一个数组，内容为当前点击的场景物体或Project资源。</span></span><br><span class="line">Selection.transforms <span class="comment">//返回一个数组，内容为当前点击的场景物体。</span></span><br><span class="line"></span><br><span class="line">Selection.selectionChanged <span class="comment">//委托，选择变化时调用。</span></span><br></pre></td></tr></table></figure>

<h3 id="2-Static-Methods-静态方法"><a href="#2-Static-Methods-静态方法" class="headerlink" title="2. Static Methods (静态方法)"></a>2. Static Methods (静态方法)</h3><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Contains 选择项中是否包含物体</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> Selection.Contains(<span class="built_in">int</span> instanceID) </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> Selection.Contains(Object obj)</span><br><span class="line"></span><br><span class="line"><span class="comment">// GetFiltered :返回按类型与模式过滤当前选择</span></span><br><span class="line"><span class="comment">// T : 过滤的泛型，只有某一种类型的对象才会被选择</span></span><br><span class="line"><span class="comment">// SelectionMode ： 选择的模式，下文细讲</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> T[] <span class="title">GetFiltered</span>&lt;<span class="title">T</span>&gt;(<span class="params">SelectionMode mode</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// GetTransforms : 允许使用SelectionMode对选择类型进行颗粒度控制</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Transform[] <span class="title">GetTransforms</span>(<span class="params">SelectionMode mode</span>)</span>;</span><br></pre></td></tr></table></figure>

<h3 id="3-SelectionMode-详解"><a href="#3-SelectionMode-详解" class="headerlink" title="3. SelectionMode 详解"></a>3. SelectionMode 详解</h3><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Unfiltered 返回整个选择（无模式过滤）</span><br><span class="line">TopLevel 只返回最上层transform， 子物体的transform将被过滤掉</span><br><span class="line">Deep 返回选择对象与他所有的子对象</span><br><span class="line">ExcludePrefab 排除选择中的prefab对象</span><br><span class="line">Editable 排除任何无法被修改的对象（只选择可以编辑的对象）</span><br><span class="line">Assets 返回Asset资源</span><br><span class="line">DeepAssets 返回整个文件夹内容（根目录与子文件夹）</span><br></pre></td></tr></table></figure>

<h3 id="4-示例案例"><a href="#4-示例案例" class="headerlink" title="4. 示例案例"></a>4. 示例案例</h3><p><strong>目的：获取某个文件夹下所有的 Texture 资产</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016958.png" alt="74d1ba52c9630af739858dc5b595df83_MD5"></p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016959.png" alt="f6a9b4d7679dcc1f99a2bdc7bd311f05_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>() <span class="comment">//EditorWindow的OnGUI方法</span></span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;选择一个文件夹，获取下面所有的Texture资源文件&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> texs = Selection.GetFiltered&lt;Texture&gt;(SelectionMode.DeepAssets); <span class="comment">//进行深度遍历所有文件夹</span></span><br><span class="line">        Debug.Log(<span class="string">$&quot;Tex总计数：<span class="subst">&#123;texs.Length&#125;</span>&quot;</span>);</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> tex <span class="keyword">in</span> texs)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//使用AssetDatabase获取一次资产路径</span></span><br><span class="line">            Debug.Log(<span class="string">$&quot;Tex 文件名：<span class="subst">&#123;tex.name&#125;</span>，文件路径 ：<span class="subst">&#123;AssetDatabase.GetAssetPath(tex)&#125;</span>&quot;</span>); </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>目的：新建一个 GameObject，同时选中</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016960.png" alt="aadc434a6958fffe3a6a95625641b6c4_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;创建一个 Cube，同时选中&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = GameObject.CreatePrimitive(PrimitiveType.Cube); <span class="comment">//创建Cube</span></span><br><span class="line">    obj.name = <span class="string">&quot;新建的Cube&quot;</span>;</span><br><span class="line">    Selection.activeGameObject = obj; <span class="comment">//选中Cube</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="六、-Event"><a href="#六、-Event" class="headerlink" title="六、 Event"></a>六、 Event</h2><p>Event 主要用于编辑器模式下，对 IMGUI 操作输入的响应。</p>
<p>在 Editor 模式（而不是 Playing 模式）下，写在代码中的类似【Input. GetKeyDown】是无效的，是无法获取键盘 &#x2F; 鼠标操作信息的，取而代之的是使用类似【<code>Event. current. type == EventType. MouseDown</code>】检测输入。</p>
<p>它的使用可以在 Editor 的面板下，也可以在场景视图中（SceneView）。</p>
<h3 id="1-简单输入"><a href="#1-简单输入" class="headerlink" title="1. 简单输入"></a>1. 简单输入</h3><p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016961.jpg" alt="0d673f3a46e635271a0c22c0827d1c16_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">EventTutorialWindow</span> : <span class="title">EditorWindow</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> EventTutorialWindow m_mainWindow;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">MenuItem (<span class="string">&quot;MyWindows/EventWindow&quot;</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenWindow</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_mainWindow = EditorWindow.GetWindow&lt;EventTutorialWindow&gt;();</span><br><span class="line">        m_mainWindow.Show();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 窗口激活时调用</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        SceneView.duringSceneGui += OnSceneView; <span class="comment">//注册场景视图刷新回调</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 窗口关闭时调用</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnDisable</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        SceneView.duringSceneGui -= OnSceneView; <span class="comment">//移除场景视图刷新回调</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> SceneView刷新回调</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;sceneView&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnSceneView</span>(<span class="params">SceneView sceneView</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Event.current.type == EventType.MouseDown &amp;&amp; Event.current.button == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Debug.Log(<span class="string">&quot;鼠标左键在场景中Clicked....&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 面板绘制</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Event.current.type == EventType.KeyDown &amp;&amp; Event.current.keyCode == KeyCode.A)</span><br><span class="line">        &#123;</span><br><span class="line">            Debug.Log(<span class="string">&quot;键盘A键在Window面板中按下....&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-组合键"><a href="#2-组合键" class="headerlink" title="2. 组合键"></a>2. 组合键</h3><p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016962.png" alt="e27a5a3075475e8db669e3a06d04abdc_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">...<span class="comment">//在上文OnSceneView（）中加入以下代码即可</span></span><br><span class="line"><span class="keyword">if</span> (Event.current.type == EventType.MouseDown &amp;&amp; Event.current.button == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (Event.current.alt) <span class="comment">//检测alt键是否被按下</span></span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">&quot;在场景视图中按下了Alt + 鼠标左键&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (Event.current.shift) <span class="comment">//检测shift键是否被按下</span></span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">&quot;在场景视图中按下了Shift + 鼠标左键&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-坐标转换"><a href="#3-坐标转换" class="headerlink" title="3. 坐标转换"></a>3. 坐标转换</h3><p>一个很常见的需求就是，我们在 SceneView 中点击了，希望在点击处发射一条射线检测场景中的物体，求一个交点然后放置什么东西（就像 Terrain 的笔刷一样），这是通过以下方式实现的。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> LayerMask layerMask = <span class="number">-1</span>; <span class="comment">//设置为-1，包含所有Layer</span></span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnSceneView</span>(<span class="params">SceneView sceneView</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (Event.current.type == EventType.MouseDown &amp;&amp; Event.current.button == <span class="number">0</span>) <span class="comment">//检测鼠标点击</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> mousePos = Event.current.mousePosition; <span class="comment">//获取鼠标在SceneView中的屏幕位置</span></span><br><span class="line">        <span class="keyword">var</span> ray = HandleUtility.GUIPointToWorldRay(mousePos); <span class="comment">//生成屏幕坐标--&gt;世界坐标的射线</span></span><br><span class="line">        RaycastHit hit; <span class="comment">//定义射线检测结果结构体</span></span><br><span class="line">        <span class="keyword">if</span> (Physics.Raycast(ray, <span class="keyword">out</span> hit, <span class="built_in">float</span>.MaxValue, layerMask)) <span class="comment">//进行射线检测，layerMask是检测层级</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> obj = GameObject.CreatePrimitive (PrimitiveType. Sphere); <span class="comment">//如果检测成功，创建一个球体。</span></span><br><span class="line">            obj.transform.position = hit.point; <span class="comment">//把球体坐标设置为hit交点处。</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016963.jpg" alt="d7875e2ed71496bda965bd80bcb56231_MD5"></p>
<h3 id="4-Tip"><a href="#4-Tip" class="headerlink" title="4. Tip"></a>4. Tip</h3><p>查阅资料的时候发现有这样一种使用方法：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Event.current.Use();</span><br></pre></td></tr></table></figure>

<p>文档解释：<a target="_blank" rel="noopener" href="https://docs.unity3d.com/ScriptReference/Event.Use.html">Unity - Scripting API: Event.Use</a></p>
<p>文档上说，在某些 Event 检测后，使用 Event.current.Use (); 就能让其他 GUI elements 忽视这次 Event。</p>
<p>比如说使用 Alt + 鼠标左键创建物体，但是这个组合键也是 unity 场景自带的组合键，用于旋转 SceneView 的，使用</p>
<p>Event.current.Use (); 就会让自带的旋转功能失效。</p>
<p>主要是为了解决组合键冲突吧。</p>
<h2 id="七、小结"><a href="#七、小结" class="headerlink" title="七、小结"></a>七、小结</h2><p>这些玩意儿纯粹是【经验性质】的使用方法，基本没啥技术含量，多读读 API 文档就好了，比如：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/BillCYJ/article/details/108429497">AssetDatabase 的方法总结_Real_JumpChen 的博客 - CSDN 博客</a></p>
<h1 id="7-Editor-美化"><a href="#7-Editor-美化" class="headerlink" title="7 Editor 美化"></a>7 Editor 美化</h1><p>本节介绍一些常用的编辑器面板美化方法，牵涉【GUIStyle、GUISkin】，你可以理解为这两者是 Unity 内置的 GUI 绘制约束与模板。</p>
<h2 id="一、字体格式-颜色"><a href="#一、字体格式-颜色" class="headerlink" title="一、字体格式 &#x2F; 颜色"></a>一、字体格式 &#x2F; 颜色</h2><p>关键字：GUIStyle</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016964.png" alt="a1bc15f68a5f425058d4015d3199b54d_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PolishWindow</span> : <span class="title">EditorWindow</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> PolishWindow m_mainWindow; <span class="comment">//主要窗口对象</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> GUIStyle defaultStyle = <span class="keyword">new</span> GUIStyle(); <span class="comment">//定义 GUIStyle</span></span><br><span class="line"></span><br><span class="line">    [<span class="meta">MenuItem(<span class="string">&quot;MyWindows/PolishWindow&quot;</span>)</span>] <span class="comment">//定义窗口菜单栏</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenWindow</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_mainWindow = EditorWindow.GetWindow&lt;PolishWindow&gt;(); <span class="comment">//创建窗口</span></span><br><span class="line">        m_mainWindow.Show(); <span class="comment">//打开窗口</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        defaultStyle.fontSize = <span class="number">10</span>; <span class="comment">//字体大小： 10</span></span><br><span class="line">        defaultStyle.fontStyle = FontStyle.Normal; <span class="comment">//字体样式：normal</span></span><br><span class="line"></span><br><span class="line">        defaultStyle.alignment = TextAnchor.MiddleCenter; <span class="comment">//字体对齐方式： 居中对齐</span></span><br><span class="line">        defaultStyle.normal.textColor = Color.red; <span class="comment">//字体颜色： 红色</span></span><br><span class="line">        EditorGUILayout.LabelField(<span class="string">&quot;这是红色字体&quot;</span>, defaultStyle); <span class="comment">//绘制GUI组件，使用 defaultStyle</span></span><br><span class="line"></span><br><span class="line">        defaultStyle.alignment = TextAnchor.MiddleLeft; <span class="comment">//字体对齐方式： 水平靠左，垂直居中</span></span><br><span class="line">        defaultStyle.normal.textColor = Color.yellow; <span class="comment">//字体颜色：黄色</span></span><br><span class="line">        defaultStyle.fontSize = <span class="number">20</span>; <span class="comment">//字体大小： 20</span></span><br><span class="line">        EditorGUILayout.LabelField(<span class="string">&quot;这是黄色字体&quot;</span>, defaultStyle); <span class="comment">//绘制GUI组件</span></span><br><span class="line"></span><br><span class="line">        defaultStyle.normal.textColor = Color.green; <span class="comment">//字体颜色： 绿色</span></span><br><span class="line">        defaultStyle.fontSize = <span class="number">12</span>; <span class="comment">//字体大小 ： 12</span></span><br><span class="line">        defaultStyle.fontStyle = FontStyle.Bold;  <span class="comment">//字体样式： Bold（加粗）</span></span><br><span class="line">        EditorGUILayout.SelectableLabel(<span class="string">&quot;这是绿色字体&quot;</span>, defaultStyle); <span class="comment">//绘制GUI</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：下文代码将只给出关键代码，实际使用位置如上所示在 OnGUI() 方法中。</p>
<h2 id="二、GUI-颜色"><a href="#二、GUI-颜色" class="headerlink" title="二、GUI 颜色"></a>二、GUI 颜色</h2><p>关键字：GUI.color</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016965.png" alt="0b6e8871bc6a4b56b8143308bb713080_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GUI.color = Color.red;</span><br><span class="line">GUILayout.Button(<span class="string">&quot;红色Button&quot;</span>);</span><br><span class="line">GUI.color = Color.green;</span><br><span class="line">EditorGUILayout.LabelField(<span class="string">&quot;绿色Label&quot;</span>);</span><br><span class="line">GUI.color = Color.yellow;</span><br><span class="line">EditorGUILayout.IntField(<span class="string">&quot;黄色Int Field&quot;</span>, <span class="number">20</span>);</span><br></pre></td></tr></table></figure>

<h2 id="三、面板分区-搜索框"><a href="#三、面板分区-搜索框" class="headerlink" title="三、面板分区 &#x2F; 搜索框"></a>三、面板分区 &#x2F; 搜索框</h2><p>关键字：</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016966.jpg" alt="2c1251c891a2d8414b9a7e6e66779ac4_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">EditorGUILayout.BeginVertical(<span class="string">&quot;box&quot;</span>);</span><br><span class="line">EditorGUILayout.LabelField(<span class="string">&quot;这是【box】样式，用于显示面板的分区&quot;</span>);</span><br><span class="line">EditorGUILayout.Vector3Field(<span class="string">&quot;比如这是一个Vec3 Field&quot;</span>, Vector3.one);</span><br><span class="line">EditorGUILayout.BeginToggleGroup(<span class="string">&quot;比如这是一个Toggle Group&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">EditorGUILayout.HelpBox(<span class="string">&quot;比如这是一个HelpBox&quot;</span>, MessageType.Warning);</span><br><span class="line">EditorGUILayout.TextArea(<span class="string">&quot;比如这是一个TextArea&quot;</span>);</span><br><span class="line">EditorGUILayout.EndToggleGroup();</span><br><span class="line">EditorGUILayout.EndVertical();</span><br><span class="line"></span><br><span class="line">EditorGUILayout.Space(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">EditorGUILayout.BeginVertical(<span class="string">&quot;frameBox&quot;</span>);</span><br><span class="line">EditorGUILayout.LabelField(<span class="string">&quot;这是【frameBox】样式，用于显示面板的分区&quot;</span>);</span><br><span class="line">EditorGUILayout.BoundsField(<span class="string">&quot;比如这是一个BoundField&quot;</span>, <span class="keyword">new</span> Bounds());</span><br><span class="line">EditorGUILayout.Slider(<span class="string">&quot;比如这是一个Slider&quot;</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line">EditorGUILayout.TextArea(<span class="string">&quot;这是一个【SearchTextField】样式的文本框&quot;</span>, <span class="string">&quot;SearchTextField&quot;</span>);</span><br><span class="line">EditorGUILayout.EndVertical();</span><br></pre></td></tr></table></figure>

<p>GUIStyle、GUISkin 的许多内置样式咱也不是很清楚全貌，只介绍了自己常用的几个，有额外需求的可以自行搜索看看。</p>
<h2 id="四、案例实战"><a href="#四、案例实战" class="headerlink" title="四、案例实战"></a>四、案例实战</h2><p>好了，你已经学会 1+1&#x3D;2 了，下面我们来算一个微积分吧。</p>
<p>样例：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016967.jpg" alt="0b60da3d68b3484b52b702cac44d79d7_MD5"></p>
<p>示例代码：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PolishWindow</span> : <span class="title">EditorWindow</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> PolishWindow m_mainWindow; <span class="comment">//主要窗口对象</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">const</span> <span class="built_in">int</span> arrayLength = <span class="number">35</span>; <span class="comment">//定义元素数组长度</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">const</span> <span class="built_in">int</span> countPerPage = <span class="number">10</span>; <span class="comment">//定义每一页的数量</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> GUILayoutOption maxWidth = GUILayout.MaxWidth(<span class="number">120</span>); <span class="comment">//定义一个GUI组件的最大宽度</span></span><br><span class="line">    <span class="keyword">private</span> Vector2 scrollRoot; <span class="comment">//定义组件ScrollView的滚动Root</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> page = <span class="number">1</span>; <span class="comment">//当前page</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> currentSelectionIndex = <span class="number">-1</span>; <span class="comment">//当前选择index</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> totalPage; <span class="comment">//页面总数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span>[] someValues; <span class="comment">//显示的元素</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">bool</span> foldOut; <span class="comment">//折叠flag</span></span><br><span class="line"></span><br><span class="line">    [<span class="meta">MenuItem(<span class="string">&quot;MyWindows/PolishWindow&quot;</span>)</span>] <span class="comment">//定义窗口菜单栏</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenWindow</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_mainWindow = EditorWindow.GetWindow&lt;PolishWindow&gt;(); <span class="comment">//创建窗口</span></span><br><span class="line">        m_mainWindow.Show(); <span class="comment">//打开窗口</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 当窗口打开时调用</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        someValues = <span class="keyword">new</span> <span class="built_in">int</span>[arrayLength]; <span class="comment">//实例化数组</span></span><br><span class="line">        totalPage = (<span class="built_in">int</span>)Mathf.Ceil((<span class="built_in">float</span>)arrayLength / (<span class="built_in">float</span>)countPerPage); <span class="comment">//计算总页数</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; someValues.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            someValues[i] = Random.Range(<span class="number">0</span>, <span class="number">100</span>); <span class="comment">//进行随机数据填充</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> Editor面板绘制方法</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        scrollRoot = EditorGUILayout.BeginScrollView(scrollRoot); <span class="comment">//开启 滚动视图 </span></span><br><span class="line">        foldOut = EditorGUILayout.BeginFoldoutHeaderGroup(foldOut, <span class="string">&quot;假装这是一个检索页面&quot;</span>); <span class="comment">//开启 折叠组</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (foldOut) <span class="comment">//如果折叠打开，则进行绘制</span></span><br><span class="line">        &#123;</span><br><span class="line">            EditorGUILayout.BeginVertical(<span class="string">&quot;frameBox&quot;</span>); <span class="comment">//开始垂直布局，使用GUIStyle ： frameBox</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = (page - <span class="number">1</span>) * countPerPage; i &lt; someValues.Length; i++) <span class="comment">//循环绘制，page 默认是1开始，这里【page-1】对齐数组下标。</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (i &gt;= page * countPerPage) <span class="comment">//一页只能绘制【countPerPage】个元素，但是arrayLength可能不止，在这里截断。</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (currentSelectionIndex == i) <span class="comment">//判断当前index与选择index</span></span><br><span class="line">                    GUI.color = Color.green; <span class="comment">//为真，突出显示选择项</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    GUI.color = Color.white; <span class="comment">//为假，还原默认颜色</span></span><br><span class="line"></span><br><span class="line">                EditorGUILayout.BeginHorizontal(<span class="string">&quot;box&quot;</span>); <span class="comment">//开始水平布局</span></span><br><span class="line">                <span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;Select This One&quot;</span>, maxWidth)) <span class="comment">//绘制选择按钮，使用maxWidth限制组件宽度</span></span><br><span class="line">                &#123;</span><br><span class="line">                    currentSelectionIndex = i; <span class="comment">//记录选择Index</span></span><br><span class="line">                &#125;</span><br><span class="line">                EditorGUILayout.LabelField(<span class="string">$&quot;这是【<span class="subst">&#123;i&#125;</span>】号，他的随机值是：<span class="subst">&#123;someValues[i]&#125;</span>&quot;</span>); <span class="comment">//显示数据信息</span></span><br><span class="line">                EditorGUILayout.EndHorizontal(); <span class="comment">//结束水平布局</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            EditorGUILayout.BeginHorizontal(); <span class="comment">//开始水平布局</span></span><br><span class="line">            EditorGUILayout.LabelField(<span class="string">$&quot;当前页数：<span class="subst">&#123;page.ToString()&#125;</span> / 总页数：<span class="subst">&#123;totalPage&#125;</span>&quot;</span>); <span class="comment">//绘制页数信息</span></span><br><span class="line">            <span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;上一页&quot;</span>)) <span class="comment">//绘制上一页Button</span></span><br><span class="line">            &#123;</span><br><span class="line">                page -= <span class="number">1</span>; <span class="comment">//当前页面-1</span></span><br><span class="line">                page = Mathf.Clamp(page, <span class="number">1</span>, totalPage); <span class="comment">//由于页面数取值是1~totalPage，这里进行一次取值范围约束</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (GUILayout.Button(<span class="string">&quot;下一页&quot;</span>)) <span class="comment">//绘制下一页Button</span></span><br><span class="line">            &#123;</span><br><span class="line">                page += <span class="number">1</span>; <span class="comment">//当前页面+1</span></span><br><span class="line">                page = Mathf.Clamp(page, <span class="number">1</span>, totalPage); <span class="comment">//由于页面数取值是1~totalPage，这里进行一次取值范围约束</span></span><br><span class="line">            &#125;</span><br><span class="line">            EditorGUILayout.EndHorizontal(); <span class="comment">//结束水平布局</span></span><br><span class="line"></span><br><span class="line">            EditorGUILayout.EndVertical(); <span class="comment">//结束垂直布局</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        EditorGUILayout.EndFoldoutHeaderGroup(); <span class="comment">//关闭 折叠组</span></span><br><span class="line">        EditorGUILayout.EndScrollView(); <span class="comment">//关闭 滚动视图</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="小结："><a href="#小结：" class="headerlink" title="小结："></a>小结：</h2><p>实际上，但我们足够熟悉 Editor 编辑器这一套时，我们完全可以遵循 OOP 思想，进行编辑器组件的封装继承。</p>
<p>比如定一个总的 EditorWindow 类，定义一个抽象基类，然后在总窗口使用反射进行类型检索，对所有继承于抽象基类的进行汇总，在面板上显示对应的按钮，点哪个就实例化哪个窗口进行显示。</p>
<p>这样在写一个新窗口时，只需要继承于抽象基类，定义基本的逻辑与绘制就可以了，总窗口会自动地把新窗口归纳整理到自己的菜单栏中。</p>
<p>当然，编辑器的奇技淫巧还有许多，全靠经验积累。</p>
<p>终于写完了，完结撒花呜呜呜。</p>
<h1 id="8-OnValidate"><a href="#8-OnValidate" class="headerlink" title="8 OnValidate"></a>8 OnValidate</h1><h2 id="需要验证一些数据"><a href="#需要验证一些数据" class="headerlink" title="需要验证一些数据"></a>需要验证一些数据</h2><p>我们都知道，搭建创建的编辑器扩展脚本，基本上都是给关卡设计或者策划人员用的。在编译游戏的时候对他们输入的一些数值进行校验，是一个好的习惯。他们不需要关心一些数值的限制，但是作为开发人员的我们是需要的。</p>
<h2 id="如何使用-OnValidate"><a href="#如何使用-OnValidate" class="headerlink" title="如何使用 OnValidate?"></a>如何使用 OnValidate?</h2><p>Validate 字面意思是生效</p>
<p>在官方文档上仅有一个简短的说明，并且没有示例代码。  </p>
<p>**编辑器模式下 OnValidate 仅在下面两种情况下被调用：</p>
<ul>
<li><p><strong>脚本被加载时</strong></p>
</li>
<li><p><strong>Inspector 中的任何值被修改时</strong></p>
<p>下面是脚本中如何使用它：</p>
</li>
</ul>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">OnValidateExample</span> : <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">int</span> size;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">OnValidate</span>()</span> &#123;</span><br><span class="line">		Debug.Log(<span class="string">&quot;OnValidate&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的脚本挂在 gameobject 上，效果如下  </p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016968.gif" alt="8cb4d3512f6ea3b04ad50d64723251ff_MD5"></p>
<h2 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h2><p>下面是一些体现 OnValidate 函数强大功能的使用场景</p>
<h3 id="角度简化"><a href="#角度简化" class="headerlink" title="角度简化"></a>角度简化</h3><p>使用场景 - 我们需要将设计人员输入的角度限定在 - 359 到 359 之间，因为 360 相当于 0 度。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">OnValidateExample</span> : <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">float</span> objectRotation;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">OnValidate</span>()</span> &#123;</span><br><span class="line">		<span class="comment">// objectRotation</span></span><br><span class="line">		objectRotation = objectRotation % <span class="number">360</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果如下：  </p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016969.gif" alt="e52f2ff8eec3500a102c38445a7abad5_MD5"></p>
<h3 id="二次方"><a href="#二次方" class="headerlink" title="二次方"></a>二次方</h3><p>使用场景 - 当需要设计人员输入 16 到 4096 之间 2 的整数次幂时<br>Unity 提供了 ClosestPowerOfTwo 函数，方便我们取得最接近的值。同时我们使用 RangeAttribute 属性来限定一下输入数值的区间，同时能更好的看出来处理后的值跟原始输入值的区别。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">OnValidateExample</span> : <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line">	[<span class="meta">RangeAttribute(16, 4096)</span>]</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">int</span> textureSize;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">OnValidate</span>()</span> &#123;</span><br><span class="line">		<span class="comment">// textureSize</span></span><br><span class="line">		textureSize = Mathf.ClosestPowerOfTwo(textureSize);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果如下  </p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016970.gif" alt="d6f4b4dc29d8e38e489497ed93c39b1d_MD5"></p>
<h3 id="关联值"><a href="#关联值" class="headerlink" title="关联值"></a>关联值</h3><p>使用场景 - 需要 “Nitro” 车的速度比其他车的速度大至少 20mph.</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">OnValidateExample</span> : <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line">	[<span class="meta">RangeAttribute(10, 300)</span>] [Tooltip(<span class="string">&quot;mph&quot;</span>)]</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">int</span> maxCarSpeed;</span><br><span class="line">	[<span class="meta">RangeAttribute(10, 300)</span>] [Tooltip(<span class="string">&quot;mph&quot;</span>)]</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">int</span> maxNitroSpeed;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">const</span> <span class="built_in">int</span> minNitroSpeedExtra = <span class="number">20</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">OnValidate</span>()</span> &#123;</span><br><span class="line">		<span class="comment">// speed check</span></span><br><span class="line">		<span class="keyword">if</span> (maxNitroSpeed &lt; maxCarSpeed + minNitroSpeedExtra)</span><br><span class="line">			maxNitroSpeed = maxCarSpeed + minNitroSpeedExtra;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果如下  </p>
<p><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190016971.gif" alt="edb3a46436e8b41813a7c7d85c16eab7_MD5"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://liuke101.github.io">灵玉</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://liuke101.github.io/post/1888.html">http://liuke101.github.io/post/1888.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://liuke101.github.io" target="_blank">游戏江湖</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Unity/">Unity</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190021833.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赏碎银二两</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202404232247905.jpg" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202404232247905.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202404232251074.jpg" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202404232251074.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/41177.html" title="模板与泛型编程"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">模板与泛型编程</div></div></a></div><div class="next-post pull-right"><a href="/post/62796.html" title="UE材质大师"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">UE材质大师</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/post/62114.html" title="Unity数据持久化"><img class="cover" src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190020794.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-07-07</div><div class="title">Unity数据持久化</div></div></a></div><div><a href="/post/64623.html" title="Unity GUI"><img class="cover" src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190021833.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-28</div><div class="title">Unity GUI</div></div></a></div><div><a href="/post/21879.html" title="Unity Primer"><img class="cover" src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190029709.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-08-22</div><div class="title">Unity Primer</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="comment-switch"><span class="first-comment">Waline</span><span id="switch-btn"></span><span class="second-comment">Livere</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div><div><div id="lv-container" data-id="city" data-uid="MTAyMC81OTc3Ny8zNjIzOQ=="></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/I168.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">灵玉</div><div class="author-info__description">游戏开发</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">77</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">21</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/liuke101"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/liuke101" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="/gamerlk@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">1. 文章主要迁移自个人的obsidian笔记，存在部分md语法冲突，导致显示异常，暂未完全修复。 2. 文章部分内容参考/引用网络资源，用于个人学习，如有侵权，请联系我删除。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-GUI-GUILayout"><span class="toc-text">1  GUI&#x2F;GUILayout</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-EditorGUI-EditorGUILayout"><span class="toc-text">2 EditorGUI&#x2F;EditorGUILayout</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%87%E6%80%BB"><span class="toc-text">汇总</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81Editor-%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%9D%A2%E6%9D%BF"><span class="toc-text">一、Editor 的基本面板</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%B5%AE%E5%8A%A8%E7%AA%97%E5%8F%A3%EF%BC%88EditorWindow%EF%BC%89"><span class="toc-text">1. 浮动窗口（EditorWindow）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%A3%80%E8%A7%86%E9%9D%A2%E6%9D%BF%EF%BC%88Inspector%EF%BC%89"><span class="toc-text">2. 检视面板（Inspector）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%8C%89%E9%92%AE%E6%8E%A7%E4%BB%B6"><span class="toc-text">二、按钮控件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%99%AE%E9%80%9A%E6%8C%89%E9%92%AE%EF%BC%88Button%EF%BC%89"><span class="toc-text">1. 普通按钮（Button）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8C%89%E4%B8%8B%E8%A7%A6%E5%8F%91%E6%8C%89%E9%92%AE%EF%BC%88DropdownButton%EF%BC%89"><span class="toc-text">2. 按下触发按钮（DropdownButton）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%98%BE%E7%A4%BA%E5%9F%9F%EF%BC%88Field%EF%BC%89"><span class="toc-text">三、显示域（Field）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AF%B9%E8%B1%A1%E5%9F%9F%EF%BC%88ObjectField%EF%BC%89"><span class="toc-text">1. 对象域（ObjectField）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%95%B4%E6%95%B0%E5%9F%9F%EF%BC%88IntField%EF%BC%89"><span class="toc-text">2. 整数域（IntField）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%B5%AE%E7%82%B9%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%81%E5%90%91%E9%87%8F%E7%AD%89%E5%90%84%E7%A7%8D%E5%9F%9F"><span class="toc-text">3. 浮点、字符串、向量等各种域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%A0%87%E7%AD%BE%E6%96%87%E6%9C%AC%E5%9F%9F%EF%BC%88LabelField%EF%BC%89"><span class="toc-text">4. 标签文本域（LabelField）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%A0%87%E7%AD%BE-%E5%B1%82%E7%BA%A7%E9%80%89%E6%8B%A9%E5%9F%9F%EF%BC%88TagField-LayerField%EF%BC%89"><span class="toc-text">5. 标签 &#x2F; 层级选择域（TagField&#x2F;LayerField）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E9%A2%9C%E8%89%B2%E5%9F%9F%EF%BC%88ColorField%EF%BC%89"><span class="toc-text">6. 颜色域（ColorField）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%8A%A8%E7%94%BB%E6%9B%B2%E7%BA%BF%E5%9F%9F%EF%BC%88CurveField%EF%BC%89"><span class="toc-text">7. 动画曲线域（CurveField）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%9E%9A%E4%B8%BE%E9%80%89%E6%8B%A9"><span class="toc-text">四、枚举选择</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%8D%95%E9%80%89%E6%9E%9A%E4%B8%BE%EF%BC%88EnumPopup%EF%BC%89"><span class="toc-text">1. 单选枚举（EnumPopup）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%A4%9A%E9%80%89%E6%9E%9A%E4%B8%BE%EF%BC%88EnumFlagsField%EF%BC%89"><span class="toc-text">2. 多选枚举（EnumFlagsField）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8D%95%E9%80%89-%E5%A4%9A%E9%80%89%E6%95%B4%E5%9E%8B%EF%BC%88IntPopup-MaskField%EF%BC%89"><span class="toc-text">3. 单选 &#x2F; 多选整型（IntPopup&#x2F;MaskField）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-%E6%8A%98%E5%8F%A0%E6%A0%8F"><span class="toc-text">五. 折叠栏</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%8A%98%E5%8F%A0%EF%BC%88Foldout%EF%BC%89"><span class="toc-text">1. 折叠（Foldout）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8A%98%E5%8F%A0%E7%BB%84%EF%BC%88FoldoutGroup%EF%BC%89"><span class="toc-text">2. 折叠组（FoldoutGroup）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD-%E5%BC%80%E5%85%B3%E6%8E%A7%E4%BB%B6"><span class="toc-text">六. 开关控件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%8D%95%E4%B8%AA%E5%BC%80%E5%85%B3%EF%BC%88Toggle%EF%BC%89"><span class="toc-text">1. 单个开关（Toggle）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BC%80%E5%85%B3%E7%BB%84%EF%BC%88ToggleGroup%EF%BC%89"><span class="toc-text">2. 开关组（ToggleGroup）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83-%E6%BB%91%E5%8A%A8%E6%8E%A7%E4%BB%B6"><span class="toc-text">七. 滑动控件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%BB%91%E5%8A%A8%E6%9D%A1%EF%BC%88Slider%EF%BC%89"><span class="toc-text">1. 滑动条（Slider）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8F%8C%E6%BB%91%E5%9D%97%E6%BB%91%E5%8A%A8%E6%9D%A1%EF%BC%88MinMaxSlider%EF%BC%89"><span class="toc-text">2. 双滑块滑动条（MinMaxSlider）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB-%E5%85%B6%E4%BB%96%E6%8E%A7%E4%BB%B6"><span class="toc-text">八. 其他控件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B8%AE%E5%8A%A9%E6%A1%86%EF%BC%88HelpBox%EF%BC%89"><span class="toc-text">1. 帮助框（HelpBox）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%97%B4%E9%9A%94%EF%BC%88Space%EF%BC%89"><span class="toc-text">2. 间隔（Space）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-GUILayout-%E6%B4%BE%E7%94%9F%E6%8E%A7%E4%BB%B6"><span class="toc-text">3. GUILayout 派生控件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-Gizmos"><span class="toc-text">4 Gizmos</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81-Gizmos-%E5%9F%BA%E7%A1%80%E4%BB%8B%E7%BB%8D"><span class="toc-text">一、 Gizmos 基础介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81-Gizmos-%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-text">二、 Gizmos 使用方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81-Gizmos-%E5%9F%BA%E6%9C%AC%E7%BB%98%E5%88%B6-API"><span class="toc-text">三、 Gizmos 基本绘制 API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%AB%8B%E6%96%B9%E4%BD%93%EF%BC%88Cube%EF%BC%89"><span class="toc-text">1. 立方体（Cube）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%A7%86%E9%94%A5%EF%BC%88Frustum%EF%BC%89"><span class="toc-text">2. 视锥（Frustum）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%B4%B4%E5%9B%BE%EF%BC%88Texture%EF%BC%89"><span class="toc-text">3. 贴图（Texture）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%9B%BE%E6%A0%87%EF%BC%88Icon%EF%BC%89"><span class="toc-text">4. 图标（Icon）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%BA%BF%E6%AE%B5%EF%BC%88Line%EF%BC%89"><span class="toc-text">5. 线段（Line）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E7%BD%91%E6%A0%BC%EF%BC%88Mesh%EF%BC%89"><span class="toc-text">6. 网格（Mesh）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%B0%84%E7%BA%BF%EF%BC%88Ray%EF%BC%89"><span class="toc-text">7. 射线（Ray）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E7%90%83%E4%BD%93%EF%BC%88Sphere%EF%BC%89"><span class="toc-text">8. 球体（Sphere）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E7%BD%91%E6%A0%BC%E7%BA%BF%EF%BC%88Wire%EF%BC%89"><span class="toc-text">9. 网格线（Wire）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E9%A2%9C%E8%89%B2%E8%AE%BE%E7%BD%AE%EF%BC%88Color%EF%BC%89"><span class="toc-text">10. 颜色设置（Color）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E7%9F%A9%E9%98%B5%E8%AE%BE%E7%BD%AE%EF%BC%88Matrix%EF%BC%89"><span class="toc-text">11. 矩阵设置（Matrix）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81-Gizmos-%E7%BB%8F%E9%AA%8C%E4%BD%BF%E7%94%A8"><span class="toc-text">四、 Gizmos 经验使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BB%98%E5%88%B6%E5%9C%86%E7%8E%AF%EF%BC%88Circle%EF%BC%89"><span class="toc-text">1. 绘制圆环（Circle）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%BB%98%E5%88%B6%E5%BC%A7%E7%BA%BF%EF%BC%88Arc%EF%BC%89"><span class="toc-text">2. 绘制弧线（Arc）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%B0%8F%E7%BB%93"><span class="toc-text">五、小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-Handles"><span class="toc-text">5 Handles</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81-Handles-%E5%9F%BA%E7%A1%80%E4%BB%8B%E7%BB%8D"><span class="toc-text">一、 Handles 基础介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81-Handles-%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-text">二、 Handles 使用方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%9F%BA%E4%BA%8E-Editor-%E7%B1%BB%E7%9A%84-OnSceneGUI"><span class="toc-text">1. 基于 Editor 类的 OnSceneGUI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9F%BA%E4%BA%8E-EditorWindow-%E7%9A%84%E6%89%8B%E5%8A%A8%E6%B3%A8%E5%86%8C"><span class="toc-text">2. 基于 EditorWindow 的手动注册</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81-Handles-%E5%9F%BA%E6%9C%AC%E7%BB%98%E5%88%B6%E6%96%B9%E6%B3%95"><span class="toc-text">三、 Handles 基本绘制方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Label%EF%BC%88%E6%96%87%E6%9C%AC%EF%BC%89"><span class="toc-text">1. Label（文本）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Line-Dotted-Line%EF%BC%88%E7%BA%BF%E6%AE%B5-%E8%99%9A%E7%BA%BF%EF%BC%89"><span class="toc-text">2. Line&#x2F;Dotted Line（线段 &#x2F; 虚线）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Arc-Disc%EF%BC%88%E5%BC%A7%E7%BA%BF-%E5%9C%86%E7%8E%AF%EF%BC%89"><span class="toc-text">3. Arc&#x2F;Disc（弧线 &#x2F; 圆环）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Rectangle%EF%BC%88%E7%9F%A9%E5%BD%A2%EF%BC%89"><span class="toc-text">4. Rectangle（矩形）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-GUI"><span class="toc-text">5. GUI</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81-%E6%8E%A7%E5%88%B6%E6%9F%84"><span class="toc-text">四、 控制柄</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81-%E5%B0%8F%E7%BB%93"><span class="toc-text">五、 小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-Editor-%E5%B8%B8%E7%94%A8%E8%BE%85%E5%8A%A9%E7%B1%BB"><span class="toc-text">6  Editor 常用辅助类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81ScriptableObject"><span class="toc-text">一、ScriptableObject</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%AE%80%E4%BB%8B%E4%B8%8E%E5%AE%9A%E4%B9%89"><span class="toc-text">1. 简介与定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">2. 基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Tip"><span class="toc-text">3. Tip</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BF%9D%E5%AD%98%E6%96%B9%E5%BC%8F%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%89"><span class="toc-text">4. 保存方式（重要）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%A0%81%E5%88%9B%E5%BB%BA-ScriptableObject"><span class="toc-text">5. 使用代码创建 ScriptableObject</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81EditorUtility"><span class="toc-text">二、EditorUtility</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%84%8F%E6%A0%87%E8%AE%B0"><span class="toc-text">1. 脏标记</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8F%90%E7%A4%BA%E6%A1%86"><span class="toc-text">2. 提示框</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%BF%9B%E5%BA%A6%E6%9D%A1"><span class="toc-text">3. 进度条</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81EditorGUIUtility"><span class="toc-text">三、EditorGUIUtility</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%90%9C%E7%B4%A2%E6%A1%86%EF%BC%88ObjectPicker%EF%BC%89"><span class="toc-text">1. 搜索框（ObjectPicker）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%80%89%E4%B8%AD%E6%8F%90%E7%A4%BA"><span class="toc-text">2. 选中提示</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81AssetDatabase"><span class="toc-text">四、AssetDatabase</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%8E%B7%E5%8F%96%E8%B5%84%E4%BA%A7%E8%B7%AF%E5%BE%84"><span class="toc-text">1. 获取资产路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8A%A0%E8%BD%BD%E8%B5%84%E4%BA%A7"><span class="toc-text">2. 加载资产</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%9B%E5%BB%BA%E8%B5%84%E4%BA%A7"><span class="toc-text">3. 创建资产</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81Selection"><span class="toc-text">五、Selection</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Object-Selection-%E5%AF%B9%E8%B1%A1%E9%80%89%E6%8B%A9"><span class="toc-text">1. Object Selection (对象选择)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Static-Methods-%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="toc-text">2. Static Methods (静态方法)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-SelectionMode-%E8%AF%A6%E8%A7%A3"><span class="toc-text">3. SelectionMode 详解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%A4%BA%E4%BE%8B%E6%A1%88%E4%BE%8B"><span class="toc-text">4. 示例案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81-Event"><span class="toc-text">六、 Event</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%AE%80%E5%8D%95%E8%BE%93%E5%85%A5"><span class="toc-text">1. 简单输入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%BB%84%E5%90%88%E9%94%AE"><span class="toc-text">2. 组合键</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%9D%90%E6%A0%87%E8%BD%AC%E6%8D%A2"><span class="toc-text">3. 坐标转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Tip"><span class="toc-text">4. Tip</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%B0%8F%E7%BB%93"><span class="toc-text">七、小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-Editor-%E7%BE%8E%E5%8C%96"><span class="toc-text">7 Editor 美化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%AD%97%E4%BD%93%E6%A0%BC%E5%BC%8F-%E9%A2%9C%E8%89%B2"><span class="toc-text">一、字体格式 &#x2F; 颜色</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81GUI-%E9%A2%9C%E8%89%B2"><span class="toc-text">二、GUI 颜色</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E9%9D%A2%E6%9D%BF%E5%88%86%E5%8C%BA-%E6%90%9C%E7%B4%A2%E6%A1%86"><span class="toc-text">三、面板分区 &#x2F; 搜索框</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98"><span class="toc-text">四、案例实战</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93%EF%BC%9A"><span class="toc-text">小结：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-OnValidate"><span class="toc-text">8 OnValidate</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E9%AA%8C%E8%AF%81%E4%B8%80%E4%BA%9B%E6%95%B0%E6%8D%AE"><span class="toc-text">需要验证一些数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-OnValidate"><span class="toc-text">如何使用 OnValidate?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Examples"><span class="toc-text">Examples</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E5%BA%A6%E7%AE%80%E5%8C%96"><span class="toc-text">角度简化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E6%AC%A1%E6%96%B9"><span class="toc-text">二次方</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E8%81%94%E5%80%BC"><span class="toc-text">关联值</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/3834.html" title="Effective Modern C++">Effective Modern C++</a><time datetime="2024-01-18T04:20:00.000Z" title="发表于 2024-01-18 12:20:00">2024-01-18</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/57053.html" title="Lua精粹">Lua精粹</a><time datetime="2023-10-28T16:00:00.000Z" title="发表于 2023-10-29 00:00:00">2023-10-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/28207.html" title="UE输入系统">UE输入系统</a><time datetime="2023-10-15T16:00:00.000Z" title="发表于 2023-10-16 00:00:00">2023-10-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/46644.html" title="UE AI系统">UE AI系统</a><time datetime="2023-10-15T16:00:00.000Z" title="发表于 2023-10-16 00:00:00">2023-10-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/8996.html" title="UEC++定时器">UEC++定时器</a><time datetime="2023-10-15T16:00:00.000Z" title="发表于 2023-10-16 00:00:00">2023-10-16</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/liuke101/PicGo-For-Hexo/image/202405190021833.png')"><div id="footer-wrap"><div class="copyright">&copy;2024 By 灵玉</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>(() => {
  let initFn = window.walineFn || null

  const initWaline = (Fn) => {
    const waline = Fn(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://waline-server-indol.vercel.app/',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      path: window.location.pathname,
      comment: true,
    }, null))

    const destroyWaline = () => {
      waline.destroy()
    }

    btf.addGlobalFn('pjax', destroyWaline, 'destroyWaline')
  }

  const loadWaline = async () => {
    if (initFn) initWaline(initFn)
    else {
      await getCSS('https://cdn.jsdelivr.net/npm/@waline/client@3.1.2/dist/waline.min.css')
      const { init } = await import('https://cdn.jsdelivr.net/npm/@waline/client@3.1.2/dist/waline.min.js')
      initFn = init || Waline.init
      initWaline(initFn)
      window.walineFn = initFn
    }
  }

  if ('Waline' === 'Waline' || !false) {
    if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script><script>(()=>{
  const loadLivere = () => {
    if (typeof LivereTower === 'object') window.LivereTower.init()
    else {
      (function(d, s) {
          var j, e = d.getElementsByTagName(s)[0];
          if (typeof LivereTower === 'function') { return; }
          j = d.createElement(s);
          j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
          j.async = true;
          e.parentNode.insertBefore(j, e);
      })(document, 'script');
    }
  }

  if ('Waline' === 'Livere' || !false) {
    if (false) btf.loadComment(document.getElementById('lv-container'), loadLivere)
    else loadLivere()
  } else {
    window.loadOtherComment = loadLivere
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = content => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = async () => {
    try {
      const res = await fetch('https://waline-server-indol.vercel.app/api/comment?type=recent&count=6', { method: 'GET' })
      const result = await res.json()
      const walineArray = result.data.map(e => {
        return {
          'content': changeContent(e.comment),
          'avatar': e.avatar,
          'nick': e.nick,
          'url': e.url + '#' + e.objectId,
          'date': e.time || e.insertedAt
        }
      })
      saveToLocal.set('waline-newest-comments', JSON.stringify(walineArray), 10/(60*24))
      generateHtml(walineArray)
    } catch (err) {
      console.error(err)
      const $dom = document.querySelector('#card-newest-comments .aside-list')
      $dom.textContent= "无法获取评论，请确认相关配置是否正确"
    }
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('waline-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="9896988395" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true"> </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.22.1/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.65.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js?v=4.13.0"></script></div></div></body></html>